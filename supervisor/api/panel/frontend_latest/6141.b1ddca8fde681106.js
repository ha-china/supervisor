export const __webpack_id__="6141";export const __webpack_ids__=["6141"];export const __webpack_modules__={52847:function(e,a,t){t.d(a,{L:()=>s});const s=(e,a)=>{const t=e.floor_id;return{area:e,floor:(t?a[t]:void 0)||null}}},22780:function(e,a,t){t.a(e,async function(e,a){try{t(65315),t(12840),t(837),t(37089),t(59023);var s=t(69868),i=t(84922),o=t(11991),r=t(65940),l=t(44017),n=t(77832),d=t(88341),h=t(52777),c=t(52847),_=t(9171),p=t(36322),u=t(15241),v=t(38525),m=(t(99322),t(64578)),g=(t(64054),t(86160),e([m]));m=(g.then?(await g)():g)[0];const y="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",f="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",$="___ADD_NEW___";class A extends i.WF{async open(){await this.updateComplete,await(this._picker?.open())}render(){const e=this.placeholder??this.hass.localize("ui.components.area-picker.area"),a=this._computeValueRenderer(this.hass.areas);return i.qy` <ha-generic-picker .hass="${this.hass}" .autofocus="${this.autofocus}" .label="${this.label}" .helper="${this.helper}" .notFoundLabel="${this.hass.localize("ui.components.area-picker.no_match")}" .placeholder="${e}" .value="${this.value}" .getItems="${this._getItems}" .getAdditionalItems="${this._getAdditionalItems}" .valueRenderer="${a}" @value-changed="${this._valueChanged}"> </ha-generic-picker> `}_valueChanged(e){e.stopPropagation();const a=e.detail.value;if(a){if(a.startsWith($)){this.hass.loadFragmentTranslation("config");const e=a.substring($.length);return void(0,v.J)(this,{suggestedName:e,createEntry:async e=>{try{const a=await(0,_.L3)(this.hass,e);this._setValue(a.area_id)}catch(e){(0,u.K$)(this,{title:this.hass.localize("ui.components.area-picker.failed_create_area"),text:e.message})}}})}this._setValue(a)}else this._setValue(void 0)}_setValue(e){this.value=e,(0,l.r)(this,"value-changed",{value:e}),(0,l.r)(this,"change")}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._computeValueRenderer=(0,r.A)(e=>e=>{const a=this.hass.areas[e];if(!a)return i.qy` <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <span slot="headline">${a}</span> `;const{floor:t}=(0,c.L)(a,this.hass.floors),s=a?(0,n.A)(a):void 0,o=t?(0,h.X)(t):void 0,r=a.icon;return i.qy` ${r?i.qy`<ha-icon slot="start" .icon="${r}"></ha-icon>`:i.qy`<ha-svg-icon slot="start" .path="${f}"></ha-svg-icon>`} <span slot="headline">${s}</span> ${o?i.qy`<span slot="supporting-text">${o}</span>`:i.s6} `}),this._getAreas=(0,r.A)((e,a,t,s,i,o,r,l,_)=>{let u,v,m={};const g=Object.values(e),y=Object.values(a),$=Object.values(t);(s||i||o||r||l)&&(m=(0,p.g2)($),u=y,v=$.filter(e=>e.area_id),s&&(u=u.filter(e=>{const a=m[e.id];return!(!a||!a.length)&&m[e.id].some(e=>s.includes((0,d.m)(e.entity_id)))}),v=v.filter(e=>s.includes((0,d.m)(e.entity_id)))),i&&(u=u.filter(e=>{const a=m[e.id];return!a||!a.length||$.every(e=>!i.includes((0,d.m)(e.entity_id)))}),v=v.filter(e=>!i.includes((0,d.m)(e.entity_id)))),o&&(u=u.filter(e=>{const a=m[e.id];return!(!a||!a.length)&&m[e.id].some(e=>{const a=this.hass.states[e.entity_id];return!!a&&(a.attributes.device_class&&o.includes(a.attributes.device_class))})}),v=v.filter(e=>{const a=this.hass.states[e.entity_id];return a.attributes.device_class&&o.includes(a.attributes.device_class)})),r&&(u=u.filter(e=>r(e))),l&&(u=u.filter(e=>{const a=m[e.id];return!(!a||!a.length)&&m[e.id].some(e=>{const a=this.hass.states[e.entity_id];return!!a&&l(a)})}),v=v.filter(e=>{const a=this.hass.states[e.entity_id];return!!a&&l(a)})));let A,b=g;u&&(A=u.filter(e=>e.area_id).map(e=>e.area_id)),v&&(A=(A??[]).concat(v.filter(e=>e.area_id).map(e=>e.area_id))),A&&(b=b.filter(e=>A.includes(e.area_id))),_&&(b=b.filter(e=>!_.includes(e.area_id)));return b.map(e=>{const{floor:a}=(0,c.L)(e,this.hass.floors),t=a?(0,h.X)(a):void 0,s=(0,n.A)(e);return{id:e.area_id,primary:s||e.area_id,secondary:t,icon:e.icon||void 0,icon_path:e.icon?void 0:f,sorting_label:s,search_labels:[s,t,e.area_id,...e.aliases].filter(e=>Boolean(e))}})}),this._getItems=()=>this._getAreas(this.hass.areas,this.hass.devices,this.hass.entities,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeAreas),this._allAreaNames=(0,r.A)(e=>Object.values(e).map(e=>(0,n.A)(e)?.toLowerCase()).filter(Boolean)),this._getAdditionalItems=e=>{if(this.noAdd)return[];const a=this._allAreaNames(this.hass.areas);return e&&!a.includes(e.toLowerCase())?[{id:$+e,primary:this.hass.localize("ui.components.area-picker.add_new_sugestion",{name:e}),icon_path:y}]:[{id:$,primary:this.hass.localize("ui.components.area-picker.add_new"),icon_path:y}]}}}(0,s.__decorate)([(0,o.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,s.__decorate)([(0,o.MZ)()],A.prototype,"label",void 0),(0,s.__decorate)([(0,o.MZ)()],A.prototype,"value",void 0),(0,s.__decorate)([(0,o.MZ)()],A.prototype,"helper",void 0),(0,s.__decorate)([(0,o.MZ)()],A.prototype,"placeholder",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],A.prototype,"noAdd",void 0),(0,s.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],A.prototype,"includeDomains",void 0),(0,s.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],A.prototype,"excludeDomains",void 0),(0,s.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],A.prototype,"includeDeviceClasses",void 0),(0,s.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-areas"})],A.prototype,"excludeAreas",void 0),(0,s.__decorate)([(0,o.MZ)({attribute:!1})],A.prototype,"deviceFilter",void 0),(0,s.__decorate)([(0,o.MZ)({attribute:!1})],A.prototype,"entityFilter",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],A.prototype,"disabled",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],A.prototype,"required",void 0),(0,s.__decorate)([(0,o.P)("ha-generic-picker")],A.prototype,"_picker",void 0),A=(0,s.__decorate)([(0,o.EM)("ha-area-picker")],A),a()}catch(e){a(e)}})},96796:function(e,a,t){t.a(e,async function(e,s){try{t.r(a);t(65315),t(837),t(37089),t(88238),t(34536),t(16257),t(20152),t(44711),t(72108),t(77030);var i=t(69868),o=t(84922),r=t(11991),l=t(33055),n=t(65940),d=t(44017),h=(t(75831),t(53657),t(94124),t(17372)),c=t(25586),_=t(68940),p=t(54528),u=(t(56608),t(86160),t(80287),t(22780)),v=t(50809),m=t(38525),g=t(9171),y=e([h,c,p,u]);[h,c,p,u]=y.then?(await y)():y;const f="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";class $ extends o.WF{showDialog(e){this._params=e,this._error=void 0,this._name=this._params.entry?this._params.entry.name:this._params.suggestedName||"",this._aliases=this._params.entry?.aliases||[],this._icon=this._params.entry?.icon||null,this._level=this._params.entry?.level??null,this._addedAreas.clear(),this._removedAreas.clear()}closeDialog(){this._error="",this._params=void 0,this._addedAreas.clear(),this._removedAreas.clear(),(0,d.r)(this,"dialog-closed",{dialog:this.localName})}render(){const e=this._floorAreas(this._params?.entry,this.hass.areas,this._addedAreas,this._removedAreas);if(!this._params)return o.s6;const a=this._params.entry,t=!this._isNameValid();return o.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,_.l)(this.hass,a?this.hass.localize("ui.panel.config.floors.editor.update_floor"):this.hass.localize("ui.panel.config.floors.editor.create_floor"))}"> <div> ${this._error?o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="form"> ${a?o.qy` <ha-settings-row> <span slot="heading"> ${this.hass.localize("ui.panel.config.floors.editor.floor_id")} </span> <span slot="description">${a.floor_id}</span> </ha-settings-row> `:o.s6} <ha-textfield .value="${this._name}" @input="${this._nameChanged}" .label="${this.hass.localize("ui.panel.config.floors.editor.name")}" .validationMessage="${this.hass.localize("ui.panel.config.floors.editor.name_required")}" required dialogInitialFocus></ha-textfield> <ha-textfield .value="${this._level}" @input="${this._levelChanged}" .label="${this.hass.localize("ui.panel.config.floors.editor.level")}" type="number"></ha-textfield> <ha-icon-picker .hass="${this.hass}" .value="${this._icon}" @value-changed="${this._iconChanged}" .label="${this.hass.localize("ui.panel.config.areas.editor.icon")}"> ${this._icon?o.s6:o.qy` <ha-floor-icon slot="fallback" .floor="${{level:this._level}}"></ha-floor-icon> `} </ha-icon-picker> <h3 class="header"> ${this.hass.localize("ui.panel.config.floors.editor.areas_section")} </h3> <p class="description"> ${this.hass.localize("ui.panel.config.floors.editor.areas_description")} </p> ${e.length?o.qy`<ha-chip-set> ${(0,l.u)(e,e=>e.area_id,e=>o.qy`<ha-input-chip .area="${e}" @click="${this._openArea}" @remove="${this._removeArea}" .label="${e?.name}"> ${e.icon?o.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:o.qy`<ha-svg-icon slot="icon" .path="${f}"></ha-svg-icon>`} </ha-input-chip>`)} </ha-chip-set>`:o.s6} <ha-area-picker no-add .hass="${this.hass}" @value-changed="${this._addArea}" .excludeAreas="${e.map(e=>e.area_id)}" .label="${this.hass.localize("ui.panel.config.floors.editor.add_area")}"></ha-area-picker> <h3 class="header"> ${this.hass.localize("ui.panel.config.floors.editor.aliases_section")} </h3> <p class="description"> ${this.hass.localize("ui.panel.config.floors.editor.aliases_description")} </p> <ha-aliases-editor .hass="${this.hass}" .aliases="${this._aliases}" @value-changed="${this._aliasesChanged}"></ha-aliases-editor> </div> </div> <ha-button appearance="plain" slot="secondaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.cancel")} </ha-button> <ha-button slot="primaryAction" @click="${this._updateEntry}" .disabled="${t||!!this._submitting}"> ${a?this.hass.localize("ui.common.save"):this.hass.localize("ui.common.create")} </ha-button> </ha-dialog> `}_openArea(e){const a=e.target.area;(0,m.J)(this,{entry:a,updateEntry:e=>(0,g.gs)(this.hass,a.area_id,e)})}_removeArea(e){const a=e.target.area.area_id;if(this._addedAreas.has(a))return this._addedAreas.delete(a),void(this._addedAreas=new Set(this._addedAreas));this._removedAreas.add(a),this._removedAreas=new Set(this._removedAreas)}_addArea(e){const a=e.detail.value;if(a){if(e.target.value="",this._removedAreas.has(a))return this._removedAreas.delete(a),void(this._removedAreas=new Set(this._removedAreas));this._addedAreas.add(a),this._addedAreas=new Set(this._addedAreas)}}_isNameValid(){return""!==this._name.trim()}_nameChanged(e){this._error=void 0,this._name=e.target.value}_levelChanged(e){this._error=void 0,this._level=""===e.target.value?null:Number(e.target.value)}_iconChanged(e){this._error=void 0,this._icon=e.detail.value}async _updateEntry(){this._submitting=!0;const e=!this._params.entry;try{const a={name:this._name.trim(),icon:this._icon||(e?void 0:null),level:this._level,aliases:this._aliases};e?await this._params.createEntry(a,this._addedAreas):await this._params.updateEntry(a,this._addedAreas,this._removedAreas),this.closeDialog()}catch(e){this._error=e.message||this.hass.localize("ui.panel.config.floors.editor.unknown_error")}finally{this._submitting=!1}}_aliasesChanged(e){this._aliases=e.detail.value}static get styles(){return[v.RF,v.nA,o.AH`ha-textfield{display:block;margin-bottom:16px}ha-floor-icon{color:var(--secondary-text-color)}ha-chip-set{margin-bottom:8px}`]}constructor(...e){super(...e),this._addedAreas=new Set,this._removedAreas=new Set,this._floorAreas=(0,n.A)((e,a,t,s)=>Object.values(a).filter(a=>(a.floor_id===e?.floor_id||t.has(a.area_id))&&!s.has(a.area_id)))}}(0,i.__decorate)([(0,r.MZ)({attribute:!1})],$.prototype,"hass",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_name",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_aliases",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_icon",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_level",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_error",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_params",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_submitting",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_addedAreas",void 0),(0,i.__decorate)([(0,r.wk)()],$.prototype,"_removedAreas",void 0),customElements.define("dialog-floor-registry-detail",$),s()}catch(e){s(e)}})},38525:function(e,a,t){t.d(a,{J:()=>o});var s=t(44017);const i=()=>Promise.all([t.e("3245"),t.e("6237"),t.e("6264"),t.e("9137"),t.e("2112"),t.e("7148"),t.e("1714"),t.e("447"),t.e("4943")]).then(t.bind(t,34865)),o=(e,a)=>{(0,s.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:i,dialogParams:a})}}};
//# sourceMappingURL=6141.b1ddca8fde681106.js.map