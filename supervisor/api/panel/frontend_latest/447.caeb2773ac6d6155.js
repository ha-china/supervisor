export const __webpack_id__="447";export const __webpack_ids__=["447"];export const __webpack_modules__={78412:function(e,t,a){a.d(t,{M:()=>s,l:()=>i});a(88238),a(34536),a(16257),a(20152),a(44711),a(72108),a(77030);const i=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function s(e){return i.has(e)?`var(--${e}-color)`:e}},83519:function(e,t,a){a.a(e,async function(e,t){try{a(65315),a(837),a(37089),a(88238),a(34536),a(16257),a(20152),a(44711),a(72108),a(77030);var i=a(69868),s=a(84922),o=a(11991),l=a(65940),r=a(44017),c=a(40804),d=a(15241),n=a(40328),h=a(61627),p=a(64578),u=(a(86160),e([p]));p=(u.then?(await u)():u)[0];const _="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",b="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",y="___ADD_NEW___",v="___NO_LABELS___";class m extends((0,n.E)(s.WF)){async open(){await this.updateComplete,await(this._picker?.open())}hassSubscribe(){return[(0,c.o5)(this.hass.connection,e=>{this._labels=e})]}render(){const e=this.placeholder??this.hass.localize("ui.components.label-picker.label"),t=this._computeValueRenderer(this._labels);return s.qy` <ha-generic-picker .disabled="${this.disabled}" .hass="${this.hass}" .autofocus="${this.autofocus}" .label="${this.label}" .notFoundLabel="${this.hass.localize("ui.components.label-picker.no_match")}" .addButtonLabel="${this.hass.localize("ui.components.label-picker.add")}" .placeholder="${e}" .value="${this.value}" .getItems="${this._getItems}" .getAdditionalItems="${this._getAdditionalItems}" .valueRenderer="${t}" @value-changed="${this._valueChanged}"> <slot .slot="${this._slotNodes?.length?"field":void 0}"></slot> </ha-generic-picker> `}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t!==v)if(t){if(t.startsWith(y)){this.hass.loadFragmentTranslation("config");const e=t.substring(y.length);return void(0,h.f)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,c._9)(this.hass,e);this._setValue(t.label_id)}catch(e){(0,d.K$)(this,{title:this.hass.localize("ui.components.label-picker.failed_create_label"),text:e.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._labelMap=(0,l.A)(e=>e?new Map(e.map(e=>[e.label_id,e])):new Map),this._computeValueRenderer=(0,l.A)(e=>t=>{const a=this._labelMap(e).get(t);return a?s.qy` ${a.icon?s.qy`<ha-icon slot="start" .icon="${a.icon}"></ha-icon>`:s.qy`<ha-svg-icon slot="start" .path="${_}"></ha-svg-icon>`} <span slot="headline">${a.name}</span> `:s.qy` <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> <span slot="headline">${t}</span> `}),this._getLabelsMemoized=(0,l.A)(c.IV),this._getItems=()=>this._labels&&0!==this._labels.length?this._getLabelsMemoized(this.hass,this._labels,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeLabels):[{id:v,primary:this.hass.localize("ui.components.label-picker.no_labels"),icon_path:_}],this._allLabelNames=(0,l.A)(e=>e?[...new Set(e.map(e=>e.name.toLowerCase()).filter(Boolean))]:[]),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allLabelNames(this._labels);return e&&!t.includes(e.toLowerCase())?[{id:y+e,primary:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:e}),icon_path:b}]:[{id:y,primary:this.hass.localize("ui.components.label-picker.add_new"),icon_path:b}]}}}(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,i.__decorate)([(0,o.MZ)()],m.prototype,"label",void 0),(0,i.__decorate)([(0,o.MZ)()],m.prototype,"value",void 0),(0,i.__decorate)([(0,o.MZ)()],m.prototype,"helper",void 0),(0,i.__decorate)([(0,o.MZ)()],m.prototype,"placeholder",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],m.prototype,"noAdd",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],m.prototype,"includeDomains",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],m.prototype,"excludeDomains",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],m.prototype,"includeDeviceClasses",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-label"})],m.prototype,"excludeLabels",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"deviceFilter",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],m.prototype,"entityFilter",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],m.prototype,"disabled",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],m.prototype,"required",void 0),(0,i.__decorate)([(0,o.wk)()],m.prototype,"_labels",void 0),(0,i.__decorate)([(0,o.KN)({flatten:!0})],m.prototype,"_slotNodes",void 0),(0,i.__decorate)([(0,o.P)("ha-generic-picker")],m.prototype,"_picker",void 0),m=(0,i.__decorate)([(0,o.EM)("ha-label-picker")],m),t()}catch(e){t(e)}})},57330:function(e,t,a){a.a(e,async function(e,t){try{a(65315),a(837),a(22416),a(37089);var i=a(69868),s=a(84922),o=a(11991),l=a(33055),r=a(65940),c=a(78412),d=a(44017),n=a(24730),h=a(40804),p=a(40328),u=a(61627),_=(a(75831),a(53657),a(83519)),b=e([_]);_=(b.then?(await b)():b)[0];const y="M3 16H10V14H3M18 14V10H16V14H12V16H16V20H18V16H22V14M14 6H3V8H14M14 10H3V12H14V10Z";class v extends((0,p.E)(s.WF)){async open(){await this.updateComplete,await(this.labelPicker?.open())}async focus(){await this.updateComplete,await(this.labelPicker?.focus())}hassSubscribe(){return[(0,h.o5)(this.hass.connection,e=>{const t={};e.forEach(e=>{t[e.label_id]=e}),this._labels=t})]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return s.qy` ${this.label?s.qy`<label>${this.label}</label>`:s.s6} <ha-label-picker .hass="${this.hass}" .helper="${this.helper}" .disabled="${this.disabled}" .required="${this.required}" .placeholder="${this.placeholder}" .excludeLabels="${this.value}" @value-changed="${this._labelChanged}"> <ha-chip-set> ${e?.length?(0,l.u)(e,e=>e?.label_id,e=>{const t=e?.color?(0,c.M)(e.color):void 0;return s.qy` <ha-input-chip .item="${e}" @remove="${this._removeItem}" @click="${this._openDetail}" .disabled="${this.disabled}" .label="${e?.name}" selected="selected" style="${t?`--color: ${t}`:""}"> ${e?.icon?s.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:s.s6} </ha-input-chip> `}):s.s6} <ha-button id="picker" size="small" appearance="filled" @click="${this._openPicker}" .disabled="${this.disabled}"> <ha-svg-icon .path="${y}" slot="start"></ha-svg-icon> ${this.hass.localize("ui.components.label-picker.add")} </ha-button> </ha-chip-set> </ha-label-picker> `}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter(e=>e!==t.label_id))}_openDetail(e){const t=e.currentTarget.item;(0,u.f)(this,{entry:t,updateEntry:async e=>{await(0,h.Rp)(this.hass,t.label_id,e)}})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout(()=>{(0,d.r)(this,"value-changed",{value:e}),(0,d.r)(this,"change")},0)}_openPicker(e){e.stopPropagation(),this.labelPicker.open()}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.A)((e,t,a)=>e?.map(e=>t?.[e]).sort((e,t)=>(0,n.xL)(e?.name||"",t?.name||"",a)))}}v.styles=s.AH`ha-chip-set{margin-bottom:8px;background-color:var(--mdc-text-field-fill-color);border-bottom:1px solid var(--ha-color-border-neutral-normal);border-top-right-radius:var(--ha-border-radius-sm);border-top-left-radius:var(--ha-border-radius-sm);padding:var(--ha-space-3)}.placeholder{color:var(--mdc-text-field-label-ink-color);display:flex;align-items:center;height:var(--ha-space-8)}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}label{display:block;margin:0 0 8px}`,(0,i.__decorate)([(0,o.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,i.__decorate)([(0,o.MZ)()],v.prototype,"label",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],v.prototype,"value",void 0),(0,i.__decorate)([(0,o.MZ)()],v.prototype,"helper",void 0),(0,i.__decorate)([(0,o.MZ)()],v.prototype,"placeholder",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],v.prototype,"noAdd",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],v.prototype,"includeDomains",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],v.prototype,"excludeDomains",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],v.prototype,"includeDeviceClasses",void 0),(0,i.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-label"})],v.prototype,"excludeLabels",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],v.prototype,"deviceFilter",void 0),(0,i.__decorate)([(0,o.MZ)({attribute:!1})],v.prototype,"entityFilter",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],v.prototype,"disabled",void 0),(0,i.__decorate)([(0,o.MZ)({type:Boolean})],v.prototype,"required",void 0),(0,i.__decorate)([(0,o.wk)()],v.prototype,"_labels",void 0),(0,i.__decorate)([(0,o.P)("ha-label-picker",!0)],v.prototype,"labelPicker",void 0),v=(0,i.__decorate)([(0,o.EM)("ha-labels-picker")],v),t()}catch(e){t(e)}})},40804:function(e,t,a){a.d(t,{IV:()=>u,Rp:()=>p,_9:()=>h,o5:()=>n});a(65315),a(12840),a(837),a(22416),a(37089),a(59023),a(88238),a(34536),a(16257),a(20152),a(44711),a(72108),a(77030);var i=a(47308),s=a(88341),o=a(24730),l=a(51849),r=a(36322);const c=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then(e=>e.sort((e,t)=>(0,o.xL)(e.name,t.name))),d=(e,t)=>e.subscribeEvents((0,l.s)(()=>c(e).then(e=>t.setState(e,!0)),500,!0),"label_registry_updated"),n=(e,t)=>(0,i.N)("_labelRegistry",c,d,e,t),h=(e,t)=>e.callWS({type:"config/label_registry/create",...t}),p=(e,t,a)=>e.callWS({type:"config/label_registry/update",label_id:t,...a}),u=(e,t,a,i,o,l,c,d)=>{if(!t||0===t.length)return[];const n=Object.values(e.devices),h=Object.values(e.entities);let p,u,_={};(a||i||o||l||c)&&(_=(0,r.g2)(h),p=n,u=h.filter(e=>e.labels.length>0),a&&(p=p.filter(e=>{const t=_[e.id];return!(!t||!t.length)&&_[e.id].some(e=>a.includes((0,s.m)(e.entity_id)))}),u=u.filter(e=>a.includes((0,s.m)(e.entity_id)))),i&&(p=p.filter(e=>{const t=_[e.id];return!t||!t.length||h.every(e=>!i.includes((0,s.m)(e.entity_id)))}),u=u.filter(e=>!i.includes((0,s.m)(e.entity_id)))),o&&(p=p.filter(t=>{const a=_[t.id];return!(!a||!a.length)&&_[t.id].some(t=>{const a=e.states[t.entity_id];return!!a&&(a.attributes.device_class&&o.includes(a.attributes.device_class))})}),u=u.filter(t=>{const a=e.states[t.entity_id];return a.attributes.device_class&&o.includes(a.attributes.device_class)})),l&&(p=p.filter(e=>l(e))),c&&(p=p.filter(t=>{const a=_[t.id];return!(!a||!a.length)&&_[t.id].some(t=>{const a=e.states[t.entity_id];return!!a&&c(a)})}),u=u.filter(t=>{const a=e.states[t.entity_id];return!!a&&c(a)})));let b=t;const y=new Set;let v;p&&(v=p.filter(e=>e.area_id).map(e=>e.area_id),p.forEach(e=>{e.labels.forEach(e=>y.add(e))})),u&&(v=(v??[]).concat(u.filter(e=>e.area_id).map(e=>e.area_id)),u.forEach(e=>{e.labels.forEach(e=>y.add(e))})),v&&v.forEach(t=>{e.areas[t].labels.forEach(e=>y.add(e))}),d&&(b=b.filter(e=>!d.includes(e.label_id))),(p||u)&&(b=b.filter(e=>y.has(e.label_id)));return b.map(e=>({id:e.label_id,primary:e.name,secondary:e.description??"",icon:e.icon||void 0,icon_path:e.icon?void 0:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",sorting_label:e.name,search_labels:[e.name,e.label_id,e.description].filter(e=>Boolean(e))}))}},40328:function(e,t,a){a.d(t,{E:()=>o});a(65315),a(59023);var i=a(69868),s=a(11991);const o=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then(e=>e()):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some(e=>void 0===this[e])&&(this.__unsubs=this.hassSubscribe())}}return(0,i.__decorate)([(0,s.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},61627:function(e,t,a){a.d(t,{f:()=>o});var i=a(44017);const s=()=>Promise.all([a.e("7598"),a.e("3245"),a.e("9526")]).then(a.bind(a,55333)),o=(e,t)=>{(0,i.r)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:s,dialogParams:t})}}};
//# sourceMappingURL=447.caeb2773ac6d6155.js.map