"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["7585"],{78412:function(e,t,i){i.d(t,{M:function(){return r},l:function(){return a}});i(35748),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(95013);const a=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function r(e){return a.has(e)?`var(--${e}-color)`:e}},37240:function(e,t,i){i.d(t,{aH:function(){return n}});var a=i(191),r=i(72652);i(35748),i(56660),i(95013);const s=[" ",": "," - "],o=e=>e.toLowerCase()!==e,n=(e,t,i)=>{const a=t[e.entity_id];return a?d(a,i):(0,r.u)(e)},d=(e,t,i)=>{const n=e.name||("original_name"in e&&null!=e.original_name?String(e.original_name):void 0),d=e.device_id?t[e.device_id]:void 0;if(!d)return n||(i?(0,r.u)(i):void 0);const l=(0,a.xn)(d);return l!==n?l&&n&&((e,t)=>{const i=e.toLowerCase(),a=t.toLowerCase();for(const r of s){const t=`${a}${r}`;if(i.startsWith(t)){const i=e.substring(t.length);if(i.length)return o(i.substr(0,i.indexOf(" ")))?i:i[0].toUpperCase()+i.slice(1)}}})(n,l)||n:void 0}},42647:function(e,t,i){i.d(t,{Cf:function(){return d}});i(65315),i(12840),i(837),i(37089),i(59023);var a=i(77832),r=i(191),s=i(37240),o=i(52777),n=i(73941);const d=(e,t,i,d,l,c)=>{const{device:h,area:p,floor:u}=(0,n.l)(e,i,d,l,c);return t.map(t=>{switch(t.type){case"entity":return(0,s.aH)(e,i,d);case"device":return h?(0,r.xn)(h):void 0;case"area":return p?(0,a.A)(p):void 0;case"floor":return u?(0,o.X)(u):void 0;case"text":return t.text;default:return""}})}},52777:function(e,t,i){i.d(t,{X:function(){return a}});i(39118);const a=e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.trim()}},73941:function(e,t,i){i.d(t,{l:function(){return a}});const a=(e,t,i,a,s)=>{const o=t[e.entity_id];return o?r(o,t,i,a,s):{entity:null,device:null,area:null,floor:null}},r=(e,t,i,a,r)=>{const s=t[e.entity_id],o=null==e?void 0:e.device_id,n=o?i[o]:void 0,d=(null==e?void 0:e.area_id)||(null==n?void 0:n.area_id),l=d?a[d]:void 0,c=null==l?void 0:l.floor_id;return{entity:s,device:n||null,area:l||null,floor:(c?r[c]:void 0)||null}}},22527:function(e,t,i){i.d(t,{n:function(){return r}});i(67579),i(41190);const a=/^(\w+)\.(\w+)$/,r=e=>a.test(e)},18183:function(e,t,i){i.d(t,{u:function(){return a}});class a{start(e){const t=Date.now();this._startY=e,this._startTime=t,this._lastY=e,this._lastTime=t,this._delta=0}move(e){const t=Date.now();return this._delta=this._startY-e,this._lastY=e,this._lastTime=t,this._delta}end(){const e=this.getVelocity(),t=Math.abs(e)>this._velocityThreshold;return{velocity:e,delta:this._delta,isSwipe:t,isDownwardSwipe:e>0}}getDelta(){return this._delta}getVelocity(){if(Date.now()-this._lastTime>=this._movementTimeThreshold)return 0;const e=this._lastTime-this._startTime;return e>0?(this._lastY-this._startY)/e:0}reset(){this._startY=0,this._delta=0,this._startTime=0,this._lastY=0,this._lastTime=0}constructor(e={}){var t,i;this._startY=0,this._delta=0,this._startTime=0,this._lastY=0,this._lastTime=0,this._velocityThreshold=null!==(t=e.velocitySwipeThreshold)&&void 0!==t?t:.5,this._movementTimeThreshold=null!==(i=e.movementTimeThreshold)&&void 0!==i?i:100}}},75831:function(e,t,i){var a=i(69868),r=i(71906),s=i(11991);class o extends r.Y{}o=(0,a.__decorate)([(0,s.EM)("ha-chip-set")],o)},8101:function(e,t,i){i(35748),i(95013);var a=i(69868),r=i(34800),s=i(33824),o=i(73808),n=i(8998),d=i(49377),l=i(68336),c=i(84922),h=i(11991);let p,u,v=e=>e;class _ extends s.${renderLeadingIcon(){return this.noLeadingIcon?(0,c.qy)(p||(p=v``)):super.renderLeadingIcon()}constructor(...e){super(...e),this.noLeadingIcon=!1}}_.styles=[d.R,r.R,l.R,n.R,o.R,(0,c.AH)(u||(u=v`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-filter-chip-container-shape:16px;--md-filter-chip-outline-color:var(--outline-color);--md-filter-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );border-radius:var(--ha-border-radius-md)}`))],(0,a.__decorate)([(0,h.MZ)({type:Boolean,reflect:!0,attribute:"no-leading-icon"})],_.prototype,"noLeadingIcon",void 0),_=(0,a.__decorate)([(0,h.EM)("ha-filter-chip")],_)},81341:function(e,t,i){i.a(e,async function(e,t){try{i(35748),i(95013);var a=i(69868),r=i(78696),s=i(84922),o=i(11991),n=i(18183),d=i(50809),l=e([r]);r=(l.then?(await l)():l)[0];let c,h,p=e=>e;const u=300;class v extends s.WF{_handleAfterHide(){this.open=!1;const e=new Event("closed",{bubbles:!0,composed:!0});this.dispatchEvent(e)}updated(e){super.updated(e),e.has("open")&&(this._drawerOpen=this.open)}render(){return(0,s.qy)(c||(c=p` <wa-drawer id="drawer" placement="bottom" .open="${0}" @wa-after-hide="${0}" without-header @touchstart="${0}"> <slot name="header"></slot> <div id="body" class="body ha-scrollbar"> <slot></slot> </div> </wa-drawer> `),this._drawerOpen,this._handleAfterHide,this._handleTouchStart)}_startResizing(e){document.addEventListener("touchmove",this._handleTouchMove,{passive:!1}),document.addEventListener("touchend",this._handleTouchEnd),document.addEventListener("touchcancel",this._handleTouchEnd),this._gestureRecognizer.start(e)}_animateSnapBack(){this.style.setProperty("--dialog-transition",`transform ${u}ms ease-out`),this.style.removeProperty("--dialog-transform"),setTimeout(()=>{this.style.removeProperty("--dialog-transition")},u)}disconnectedCallback(){super.disconnectedCallback(),this._unregisterResizeHandlers(),this._isDragging=!1}constructor(...e){super(...e),this.open=!1,this.flexContent=!1,this._drawerOpen=!1,this._gestureRecognizer=new n.u,this._isDragging=!1,this._handleTouchStart=e=>{for(const t of e.composedPath()){const e=t;if(e===this._drawer)break;if(e.scrollTop>0)return}this._startResizing(e.touches[0].clientY)},this._handleTouchMove=e=>{const t=e.touches[0].clientY,i=this._gestureRecognizer.move(t);i<0&&(e.preventDefault(),this._isDragging=!0,requestAnimationFrame(()=>{this._isDragging&&this.style.setProperty("--dialog-transform",`translateY(${-1*i}px)`)}))},this._handleTouchEnd=()=>{var e;this._unregisterResizeHandlers(),this._isDragging=!1;const t=this._gestureRecognizer.end();if(t.isSwipe)return void(t.isDownwardSwipe?this._drawerOpen=!1:this._animateSnapBack());const i=null===(e=this._drawer.shadowRoot)||void 0===e?void 0:e.querySelector('[part="body"]'),a=(null==i?void 0:i.offsetHeight)||0;a>0&&t.delta<0&&Math.abs(t.delta)>.5*a?this._drawerOpen=!1:this._animateSnapBack()},this._unregisterResizeHandlers=()=>{document.removeEventListener("touchmove",this._handleTouchMove),document.removeEventListener("touchend",this._handleTouchEnd),document.removeEventListener("touchcancel",this._handleTouchEnd)}}}v.styles=[d.dp,(0,s.AH)(h||(h=p`wa-drawer{--wa-color-surface-raised:transparent;--spacing:0;--size:var(--ha-bottom-sheet-height, auto);--show-duration:${0}ms;--hide-duration:${0}ms}wa-drawer::part(dialog){max-height:var(--ha-bottom-sheet-max-height,90vh);align-items:center;transform:var(--dialog-transform);transition:var(--dialog-transition)}wa-drawer::part(body){max-width:var(--ha-bottom-sheet-max-width);width:100%;border-top-left-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));border-top-right-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));background-color:var(--ha-bottom-sheet-surface-background,var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff)));padding:var(--ha-bottom-sheet-padding,0 var(--safe-area-inset-right) var(--safe-area-inset-bottom) var(--safe-area-inset-left))}:host([flexcontent]) wa-drawer::part(body){display:flex;flex-direction:column}:host([flexcontent]) .body{flex:1;max-width:100%;display:flex;flex-direction:column;padding:var(--ha-bottom-sheet-padding,0 var(--safe-area-inset-right) var(--safe-area-inset-bottom) var(--safe-area-inset-left))}`),u,u)],(0,a.__decorate)([(0,o.MZ)({type:Boolean})],v.prototype,"open",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0,attribute:"flexcontent"})],v.prototype,"flexContent",void 0),(0,a.__decorate)([(0,o.wk)()],v.prototype,"_drawerOpen",void 0),(0,a.__decorate)([(0,o.P)("#drawer")],v.prototype,"_drawer",void 0),v=(0,a.__decorate)([(0,o.EM)("ha-bottom-sheet")],v),t()}catch(c){t(c)}})},99322:function(e,t,i){i(35748),i(95013);var a=i(69868),r=i(84922),s=i(11991),o=i(99260);let n;class d extends o.G{constructor(...e){super(...e),this.borderTop=!1}}d.styles=[...o.J,(0,r.AH)(n||(n=(e=>e)`:host{--md-list-item-one-line-container-height:48px;--md-list-item-two-line-container-height:64px}:host([border-top]) md-item{border-top:1px solid var(--divider-color)}[slot=start]{--state-icon-color:var(--secondary-text-color)}[slot=headline]{line-height:var(--ha-line-height-normal);font-size:var(--ha-font-size-m);white-space:nowrap}[slot=supporting-text]{line-height:var(--ha-line-height-normal);font-size:var(--ha-font-size-s);white-space:nowrap}::slotted(img),::slotted(state-badge){width:32px;height:32px}::slotted(.code){font-family:var(--ha-font-family-code);font-size:var(--ha-font-size-xs)}::slotted(.domain){font-size:var(--ha-font-size-s);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-normal);align-self:flex-end;max-width:30%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}`))],(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0,attribute:"border-top"})],d.prototype,"borderTop",void 0),d=(0,a.__decorate)([(0,s.EM)("ha-combo-box-item")],d)},16520:function(e,t,i){i(35748),i(5934),i(95013);var a=i(69868),r=i(84922),s=i(11991),o=i(75907),n=i(44017),d=i(54337);i(86160);let l,c,h,p,u=e=>e;class v extends r.WF{render(){const e=this.noCollapse?r.s6:(0,r.qy)(l||(l=u` <ha-svg-icon .path="${0}" class="summary-icon ${0}"></ha-svg-icon> `),"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",(0,o.H)({expanded:this.expanded}));return(0,r.qy)(c||(c=u` <div class="top ${0}"> <div id="summary" class="${0}" @click="${0}" @keydown="${0}" @focus="${0}" @blur="${0}" role="button" tabindex="${0}" aria-expanded="${0}" aria-controls="sect1" part="summary"> ${0} <slot name="leading-icon"></slot> <slot name="header"> <div class="header"> ${0} <slot class="secondary" name="secondary">${0}</slot> </div> </slot> ${0} <slot name="icons"></slot> </div> </div> <div class="container ${0}" @transitionend="${0}" role="region" aria-labelledby="summary" aria-hidden="${0}" tabindex="-1"> ${0} </div> `),(0,o.H)({expanded:this.expanded}),(0,o.H)({noCollapse:this.noCollapse}),this._toggleContainer,this._toggleContainer,this._focusChanged,this._focusChanged,this.noCollapse?-1:0,this.expanded,this.leftChevron?e:r.s6,this.header,this.secondary,this.leftChevron?r.s6:e,(0,o.H)({expanded:this.expanded}),this._handleTransitionEnd,!this.expanded,this._showContent?(0,r.qy)(h||(h=u`<slot></slot>`)):"")}willUpdate(e){super.willUpdate(e),e.has("expanded")&&(this._showContent=this.expanded,setTimeout(()=>{this._container.style.overflow=this.expanded?"initial":"hidden"},300))}_handleTransitionEnd(){this._container.style.removeProperty("height"),this._container.style.overflow=this.expanded?"initial":"hidden",this._showContent=this.expanded}async _toggleContainer(e){if(e.defaultPrevented)return;if("keydown"===e.type&&"Enter"!==e.key&&" "!==e.key)return;if(e.preventDefault(),this.noCollapse)return;const t=!this.expanded;(0,n.r)(this,"expanded-will-change",{expanded:t}),this._container.style.overflow="hidden",t&&(this._showContent=!0,await(0,d.E)());const i=this._container.scrollHeight;this._container.style.height=`${i}px`,t||setTimeout(()=>{this._container.style.height="0px"},0),this.expanded=t,(0,n.r)(this,"expanded-changed",{expanded:this.expanded})}_focusChanged(e){this.noCollapse||this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}constructor(...e){super(...e),this.expanded=!1,this.outlined=!1,this.leftChevron=!1,this.noCollapse=!1,this._showContent=this.expanded}}v.styles=(0,r.AH)(p||(p=u`:host{display:block}.top{display:flex;align-items:center;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.top.expanded{border-bottom-left-radius:0px;border-bottom-right-radius:0px}.top.focused{background:var(--input-fill-color)}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--outline-color);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.summary-icon{transition:transform 150ms cubic-bezier(.4, 0, .2, 1);direction:var(--direction);margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;border-radius:var(--ha-border-radius-circle)}#summary:focus-visible ha-svg-icon.summary-icon{background-color:var(--ha-color-fill-neutral-normal-active)}::slotted([slot=leading-icon]),:host([left-chevron]) .summary-icon{margin-left:0;margin-right:8px;margin-inline-start:0;margin-inline-end:8px}#summary{flex:1;display:flex;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:var(--ha-font-weight-medium);outline:0}#summary.noCollapse{cursor:default}.summary-icon.expanded{transform:rotate(180deg)}.header,::slotted([slot=header]){flex:1;overflow-wrap:anywhere}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4, 0, .2, 1);height:0px}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:var(--ha-font-size-s)}`)),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],v.prototype,"expanded",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],v.prototype,"outlined",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"left-chevron",type:Boolean,reflect:!0})],v.prototype,"leftChevron",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:"no-collapse",type:Boolean,reflect:!0})],v.prototype,"noCollapse",void 0),(0,a.__decorate)([(0,s.MZ)()],v.prototype,"header",void 0),(0,a.__decorate)([(0,s.MZ)()],v.prototype,"secondary",void 0),(0,a.__decorate)([(0,s.wk)()],v.prototype,"_showContent",void 0),(0,a.__decorate)([(0,s.P)(".container")],v.prototype,"_container",void 0),v=(0,a.__decorate)([(0,s.EM)("ha-expansion-panel")],v)},51964:function(e,t,i){i.d(t,{Si:function(){return l}});var a=i(69868),r=i(84922),s=i(11991);i(86160);let o,n,d=e=>e;const l=e=>{switch(e.level){case 0:return"M11,10H13V16H11V10M22,12H19V20H5V12H2L12,3L22,12M15,10A2,2 0 0,0 13,8H11A2,2 0 0,0 9,10V16A2,2 0 0,0 11,18H13A2,2 0 0,0 15,16V10Z";case 1:return"M12,3L2,12H5V20H19V12H22L12,3M10,8H14V18H12V10H10V8Z";case 2:return"M12,3L2,12H5V20H19V12H22L12,3M9,8H13A2,2 0 0,1 15,10V12A2,2 0 0,1 13,14H11V16H15V18H9V14A2,2 0 0,1 11,12H13V10H9V8Z";case 3:return"M12,3L22,12H19V20H5V12H2L12,3M15,11.5V10C15,8.89 14.1,8 13,8H9V10H13V12H11V14H13V16H9V18H13A2,2 0 0,0 15,16V14.5A1.5,1.5 0 0,0 13.5,13A1.5,1.5 0 0,0 15,11.5Z";case-1:return"M12,3L2,12H5V20H19V12H22L12,3M11,15H7V13H11V15M15,18H13V10H11V8H15V18Z"}return"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"};class c extends r.WF{render(){if(this.floor.icon)return(0,r.qy)(o||(o=d`<ha-icon .icon="${0}"></ha-icon>`),this.floor.icon);const e=l(this.floor);return(0,r.qy)(n||(n=d`<ha-svg-icon .path="${0}"></ha-svg-icon>`),e)}}(0,a.__decorate)([(0,s.MZ)({attribute:!1})],c.prototype,"floor",void 0),(0,a.__decorate)([(0,s.MZ)()],c.prototype,"icon",void 0),c=(0,a.__decorate)([(0,s.EM)("ha-floor-icon")],c)},70647:function(e,t,i){i(35748),i(95013);var a=i(69868),r=i(84922),s=i(11991);let o,n,d=e=>e;class l extends r.WF{render(){return(0,r.qy)(o||(o=d`<slot></slot>`))}constructor(...e){super(...e),this.disabled=!1}}l.styles=(0,r.AH)(n||(n=d`:host{display:block;color:var(--mdc-text-field-label-ink-color,rgba(0,0,0,.6));font-size:.75rem;padding-left:16px;padding-right:16px;padding-inline-start:16px;padding-inline-end:16px;letter-spacing:var(
        --mdc-typography-caption-letter-spacing,
        .0333333333em
      );line-height:normal}:host([disabled]){color:var(--mdc-text-field-disabled-ink-color,rgba(0,0,0,.6))}`)),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],l.prototype,"disabled",void 0),l=(0,a.__decorate)([(0,s.EM)("ha-input-helper-text")],l)},99260:function(e,t,i){i.d(t,{G:function(){return c},J:function(){return l}});var a=i(69868),r=i(64980),s=i(23719),o=i(84922),n=i(11991);let d;const l=[s.R,(0,o.AH)(d||(d=(e=>e)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}`))];class c extends r.n{}c.styles=l,c=(0,a.__decorate)([(0,n.EM)("ha-md-list-item")],c)},97750:function(e,t,i){var a=i(69868),r=i(88752),s=i(43739),o=i(84922),n=i(11991);let d;class l extends r.B{}l.styles=[s.R,(0,o.AH)(d||(d=(e=>e)`:host{--md-sys-color-surface:var(--card-background-color)}`))],l=(0,a.__decorate)([(0,n.EM)("ha-md-list")],l)},43135:function(e,t,i){i.a(e,async function(e,a){try{i.r(t),i.d(t,{HaTargetSelector:function(){return g}});i(35748),i(65315),i(59023),i(95013);var r=i(69868),s=i(84922),o=i(11991),n=i(65940),d=i(11111),l=i(95968),c=i(8549),h=i(91205),p=i(44736),u=e([p]);p=(u.then?(await u)():u)[0];let v,_,m,y=e=>e;class g extends s.WF{_hasIntegration(e){var t,i;return(null===(t=e.target)||void 0===t?void 0:t.entity)&&(0,d.e)(e.target.entity).some(e=>e.integration)||(null===(i=e.target)||void 0===i?void 0:i.device)&&(0,d.e)(e.target.device).some(e=>e.integration)}updated(e){super.updated(e),e.has("selector")&&this._hasIntegration(this.selector)&&!this._entitySources&&(0,c.c)(this.hass).then(e=>{this._entitySources=e}),e.has("selector")&&(this._createDomains=(0,h.Lo)(this.selector))}render(){return this._hasIntegration(this.selector)&&!this._entitySources?s.s6:(0,s.qy)(v||(v=y` ${0} <ha-target-picker .hass="${0}" .value="${0}" .helper="${0}" .deviceFilter="${0}" .entityFilter="${0}" .disabled="${0}" .createDomains="${0}"></ha-target-picker>`),this.label?(0,s.qy)(_||(_=y`<label>${0}</label>`),this.label):s.s6,this.hass,this.value,this.helper,this._filterDevices,this._filterEntities,this.disabled,this._createDomains)}constructor(...e){super(...e),this.disabled=!1,this._deviceIntegrationLookup=(0,n.A)(l.fk),this._filterEntities=e=>{var t;return null===(t=this.selector.target)||void 0===t||!t.entity||(0,d.e)(this.selector.target.entity).some(t=>(0,h.Ru)(t,e,this._entitySources))},this._filterDevices=e=>{var t;if(null===(t=this.selector.target)||void 0===t||!t.device)return!0;const i=this._entitySources?this._deviceIntegrationLookup(this._entitySources,Object.values(this.hass.entities)):void 0;return(0,d.e)(this.selector.target.device).some(t=>(0,h.vX)(t,e,i))}}}g.styles=(0,s.AH)(m||(m=y`ha-target-picker{display:block}`)),(0,r.__decorate)([(0,o.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,r.__decorate)([(0,o.MZ)({attribute:!1})],g.prototype,"selector",void 0),(0,r.__decorate)([(0,o.MZ)({type:Object})],g.prototype,"value",void 0),(0,r.__decorate)([(0,o.MZ)()],g.prototype,"label",void 0),(0,r.__decorate)([(0,o.MZ)()],g.prototype,"helper",void 0),(0,r.__decorate)([(0,o.MZ)({type:Boolean})],g.prototype,"disabled",void 0),(0,r.__decorate)([(0,o.wk)()],g.prototype,"_entitySources",void 0),(0,r.__decorate)([(0,o.wk)()],g.prototype,"_createDomains",void 0),g=(0,r.__decorate)([(0,o.EM)("ha-selector-target")],g),a()}catch(v){a(v)}})},44736:function(e,t,i){i.a(e,async function(e,t){try{i(79827),i(35748),i(99342),i(65315),i(837),i(22416),i(37089),i(12977),i(5934),i(18223),i(95013);var a=i(69868),r=i(37656),s=i(948),o=i(84922),n=i(11991),d=i(11111),l=i(44017),c=i(22527),h=i(18289),p=i(40328),u=i(5001),v=i(81341),_=i(17372),m=(i(70647),i(86160),i(68645)),y=i(30313),g=i(80578),f=e([r,v,_,m,y,g]);[r,v,_,m,y,g]=f.then?(await f)():f;let b,x,$,w,k,M,H,I,C,L,z,D,E,V,q,F,T,O,S,Z,j=e=>e;const A="M3 16H10V14H3M18 14V10H16V14H12V16H16V20H18V16H22V14M14 6H3V8H14M14 10H3V12H14V10Z";class P extends((0,p.E)(o.WF)){render(){return this.addOnTop?(0,o.qy)(b||(b=j` ${0} ${0} `),this._renderPicker(),this._renderItems()):(0,o.qy)(x||(x=j` ${0} ${0} `),this._renderItems(),this._renderPicker())}_renderValueChips(){var e,t,i,a,r;const s=null!==(e=this.value)&&void 0!==e&&e.entity_id?(0,d.e)(this.value.entity_id):[],n=null!==(t=this.value)&&void 0!==t&&t.device_id?(0,d.e)(this.value.device_id):[],l=null!==(i=this.value)&&void 0!==i&&i.area_id?(0,d.e)(this.value.area_id):[],c=null!==(a=this.value)&&void 0!==a&&a.floor_id?(0,d.e)(this.value.floor_id):[],h=null!==(r=this.value)&&void 0!==r&&r.label_id?(0,d.e)(this.value.label_id):[];return s.length||n.length||l.length||c.length||h.length?(0,o.qy)($||($=j` <div class="mdc-chip-set items"> ${0} ${0} ${0} ${0} ${0} </div> `),c.length?c.map(e=>(0,o.qy)(w||(w=j` <ha-target-picker-value-chip .hass="${0}" type="floor" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):o.s6,l.length?l.map(e=>(0,o.qy)(k||(k=j` <ha-target-picker-value-chip .hass="${0}" type="area" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):o.s6,n.length?n.map(e=>(0,o.qy)(M||(M=j` <ha-target-picker-value-chip .hass="${0}" type="device" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):o.s6,s.length?s.map(e=>(0,o.qy)(H||(H=j` <ha-target-picker-value-chip .hass="${0}" type="entity" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):o.s6,h.length?h.map(e=>(0,o.qy)(I||(I=j` <ha-target-picker-value-chip .hass="${0}" type="label" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):o.s6):o.s6}_renderValueGroups(){var e,t,i,a,r,s;const n=null!==(e=this.value)&&void 0!==e&&e.entity_id?(0,d.e)(this.value.entity_id):[],l=null!==(t=this.value)&&void 0!==t&&t.device_id?(0,d.e)(this.value.device_id):[],c=null!==(i=this.value)&&void 0!==i&&i.area_id?(0,d.e)(this.value.area_id):[],h=null!==(a=this.value)&&void 0!==a&&a.floor_id?(0,d.e)(this.value.floor_id):[],p=null!==(r=this.value)&&void 0!==r&&r.label_id?(0,d.e)(null===(s=this.value)||void 0===s?void 0:s.label_id):[];return n.length||l.length||c.length||h.length||p.length?(0,o.qy)(C||(C=j` <div class="item-groups"> ${0} ${0} ${0} ${0} </div> `),n.length?(0,o.qy)(L||(L=j` <ha-target-picker-item-group @remove-target-item="${0}" type="entity" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{entity:n},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):o.s6,l.length?(0,o.qy)(z||(z=j` <ha-target-picker-item-group @remove-target-item="${0}" type="device" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{device:l},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):o.s6,h.length||c.length?(0,o.qy)(D||(D=j` <ha-target-picker-item-group @remove-target-item="${0}" type="area" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{floor:h,area:c},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):o.s6,p.length?(0,o.qy)(E||(E=j` <ha-target-picker-item-group @remove-target-item="${0}" type="label" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{label:p},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):o.s6):o.s6}_renderItems(){return(0,o.qy)(V||(V=j` ${0} `),this.compact?this._renderValueChips():this._renderValueGroups())}_renderPicker(){return(0,o.qy)(q||(q=j` <div class="add-target-wrapper"> <ha-button id="add-target-button" size="small" appearance="filled" @click="${0}"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> ${0} </ha-button> ${0} </div> ${0} `),this._showPicker,A,this.hass.localize("ui.components.target-picker.add_target"),this._narrow||!this._pickerWrapperOpen&&!this._open?this._pickerWrapperOpen||this._open?(0,o.qy)(T||(T=j`<ha-bottom-sheet flexcontent .open="${0}" @wa-after-show="${0}" @closed="${0}" role="dialog" aria-modal="true" aria-label="${0}"> ${0} </ha-bottom-sheet>`),this._pickerWrapperOpen,this._showSelector,this._hidePicker,this.hass.localize("ui.components.target-picker.add_target"),this._renderTargetSelector(!0)):o.s6:(0,o.qy)(F||(F=j` <wa-popover .open="${0}" style="--body-width:${0}px" without-arrow distance="-4" placement="bottom-start" for="add-target-button" auto-size="vertical" auto-size-padding="16" @wa-after-show="${0}" @wa-after-hide="${0}" trap-focus role="dialog" aria-modal="true" aria-label="${0}"> ${0} </wa-popover> `),this._pickerWrapperOpen,this._addTargetWidth,this._showSelector,this._hidePicker,this.hass.localize("ui.components.target-picker.add_target"),this._renderTargetSelector()),this.helper?(0,o.qy)(O||(O=j`<ha-input-helper-text .disabled="${0}">${0}</ha-input-helper-text>`),this.disabled,this.helper):o.s6)}connectedCallback(){super.connectedCallback(),this._handleResize(),window.addEventListener("resize",this._handleResize)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._handleResize)}_showPicker(){var e;this._addTargetWidth=(null===(e=this._addTargetWrapper)||void 0===e?void 0:e.offsetWidth)||0,this._pickerWrapperOpen=!0}_handleUpdatePickerFilter(e){this._updatePickerFilter("string"==typeof e.detail?e.detail:void 0)}_hidePicker(e){e.stopPropagation(),this._open=!1,this._pickerWrapperOpen=!1,this._newTarget&&(this._addTarget(this._newTarget.id,this._newTarget.type),this._newTarget=void 0)}_renderTargetSelector(e=!1){return this._open?(0,o.qy)(S||(S=j` <ha-target-picker-selector .hass="${0}" @filter-type-changed="${0}" .filterType="${0}" @target-picked="${0}" @create-domain-picked="${0}" .targetValue="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}" .createDomains="${0}" .mode="${0}"></ha-target-picker-selector> `),this.hass,this._handleUpdatePickerFilter,this._pickerFilter,this._handleTargetPicked,this._handleCreateDomain,this.value,this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses,this.createDomains,e?"dialog":"popover"):o.s6}_addTarget(e,t){var i,a;const r=`${t}_id`;("entity_id"!==r||(0,c.n)(e))&&(this.value&&this.value[r]&&(0,d.e)(this.value[r]).includes(e)||((0,l.r)(this,"value-changed",{value:this.value?Object.assign(Object.assign({},this.value),{},{[r]:this.value[r]?[...(0,d.e)(this.value[r]),e]:e}):{[r]:e}}),null===(i=this.shadowRoot)||void 0===i||null===(i=i.querySelector(`ha-target-picker-item-group[type='${null===(a=this._newTarget)||void 0===a?void 0:a.type}']`))||void 0===i||i.removeAttribute("collapsed")))}_handleRemove(e){const{type:t,id:i}=e.detail;(0,l.r)(this,"value-changed",{value:this._removeItem(this.value,t,i)})}_handleExpand(e){const t=e.detail.type,i=e.detail.id,a=[],r=[],s=[];if("floor"===t)Object.values(this.hass.areas).forEach(e=>{var t;e.floor_id!==i||null!==(t=this.value.area_id)&&void 0!==t&&t.includes(e.area_id)||!(0,h.Kx)(e,this.hass.devices,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||a.push(e.area_id)});else if("area"===t)Object.values(this.hass.devices).forEach(e=>{var t;e.area_id!==i||null!==(t=this.value.device_id)&&void 0!==t&&t.includes(e.id)||!(0,h.Ly)(e,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||r.push(e.id)}),Object.values(this.hass.entities).forEach(e=>{var t;e.area_id!==i||null!==(t=this.value.entity_id)&&void 0!==t&&t.includes(e.entity_id)||!(0,h.YK)(e,!1,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||s.push(e.entity_id)});else if("device"===t)Object.values(this.hass.entities).forEach(e=>{var t;e.device_id!==i||null!==(t=this.value.entity_id)&&void 0!==t&&t.includes(e.entity_id)||!(0,h.YK)(e,!1,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||s.push(e.entity_id)});else{if("label"!==t)return;Object.values(this.hass.areas).forEach(e=>{var t;!e.labels.includes(i)||null!==(t=this.value.area_id)&&void 0!==t&&t.includes(e.area_id)||!(0,h.Kx)(e,this.hass.devices,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||a.push(e.area_id)}),Object.values(this.hass.devices).forEach(e=>{var t;!e.labels.includes(i)||null!==(t=this.value.device_id)&&void 0!==t&&t.includes(e.id)||!(0,h.Ly)(e,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||r.push(e.id)}),Object.values(this.hass.entities).forEach(e=>{var t;!e.labels.includes(i)||null!==(t=this.value.entity_id)&&void 0!==t&&t.includes(e.entity_id)||!(0,h.YK)(e,!0,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||s.push(e.entity_id)})}let o=this.value;s.length&&(o=this._addItems(o,"entity_id",s)),r.length&&(o=this._addItems(o,"device_id",r)),a.length&&(o=this._addItems(o,"area_id",a)),o=this._removeItem(o,t,i),(0,l.r)(this,"value-changed",{value:o})}_addItems(e,t,i){return Object.assign(Object.assign({},e),{},{[t]:e[t]?(0,d.e)(e[t]).concat(i):i})}_removeItem(e,t,i){const a=`${t}_id`,r=(0,d.e)(e[a]).filter(e=>String(e)!==i);if(r.length)return Object.assign(Object.assign({},e),{},{[a]:r});const s=Object.assign({},e);return delete s[a],Object.keys(s).length?s:void 0}static get styles(){return(0,o.AH)(Z||(Z=j`.add-target-wrapper{display:flex;justify-content:flex-start;margin-top:var(--ha-space-3)}wa-popover{--wa-space-l:var(--ha-space-0)}wa-popover::part(body){width:min(max(var(--body-width),336px),600px);max-width:min(max(var(--body-width),336px),600px);max-height:500px;height:70vh;overflow:hidden}@media (max-height:1000px){wa-popover::part(body){max-height:400px}}ha-bottom-sheet{--ha-bottom-sheet-height:90vh;--ha-bottom-sheet-height:calc(100dvh - var(--ha-space-12));--ha-bottom-sheet-max-height:var(--ha-bottom-sheet-height);--ha-bottom-sheet-max-width:600px;--ha-bottom-sheet-padding:var(--ha-space-0);--ha-bottom-sheet-surface-background:var(--card-background-color)}${0} .items{z-index:2}.mdc-chip-set{padding:var(--ha-space-1) var(--ha-space-0);gap:var(--ha-space-2)}.item-groups{overflow:hidden;border:2px solid var(--divider-color);border-radius:var(--ha-border-radius-lg)}`),(0,o.iz)(s))}constructor(...e){super(...e),this.compact=!1,this.disabled=!1,this.addOnTop=!1,this._open=!1,this._addTargetWidth=0,this._narrow=!1,this._pickerWrapperOpen=!1,this._handleResize=()=>{this._narrow=window.matchMedia("(max-width: 870px)").matches||window.matchMedia("(max-height: 500px)").matches},this._showSelector=()=>{this._open=!0,requestAnimationFrame(()=>{var e;null===(e=this._targetPickerSelectorElement)||void 0===e||e.focus()})},this._updatePickerFilter=e=>{this._pickerFilter=e},this._handleTargetPicked=async e=>{e.stopPropagation(),this._pickerWrapperOpen=!1,e.detail.type&&e.detail.id&&(this._newTarget=e.detail)},this._handleCreateDomain=e=>{this._pickerWrapperOpen=!1;const t=e.detail;(0,u.$)(this,{domain:t,dialogClosedCallback:e=>{e.entityId&&requestAnimationFrame(()=>{this._addTarget(e.entityId,"entity")})}})}}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],P.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],P.prototype,"value",void 0),(0,a.__decorate)([(0,n.MZ)()],P.prototype,"helper",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],P.prototype,"compact",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1,type:Array})],P.prototype,"createDomains",void 0),(0,a.__decorate)([(0,n.MZ)({type:Array,attribute:"include-domains"})],P.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,n.MZ)({type:Array,attribute:"include-device-classes"})],P.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],P.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],P.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],P.prototype,"disabled",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:"add-on-top",type:Boolean})],P.prototype,"addOnTop",void 0),(0,a.__decorate)([(0,n.wk)()],P.prototype,"_open",void 0),(0,a.__decorate)([(0,n.wk)()],P.prototype,"_addTargetWidth",void 0),(0,a.__decorate)([(0,n.wk)()],P.prototype,"_narrow",void 0),(0,a.__decorate)([(0,n.wk)()],P.prototype,"_pickerFilter",void 0),(0,a.__decorate)([(0,n.wk)()],P.prototype,"_pickerWrapperOpen",void 0),(0,a.__decorate)([(0,n.P)(".add-target-wrapper")],P.prototype,"_addTargetWrapper",void 0),(0,a.__decorate)([(0,n.P)("ha-target-picker-selector")],P.prototype,"_targetPickerSelectorElement",void 0),P=(0,a.__decorate)([(0,n.EM)("ha-target-picker")],P),t()}catch(b){t(b)}})},7245:function(e,t,i){i.a(e,async function(e,t){try{i(35748),i(95013);var a=i(69868),r=i(28784),s=i(84922),o=i(11991),n=e([r]);r=(n.then?(await n)():n)[0];let d,l=e=>e;class c extends r.A{static get styles(){return[r.A.styles,(0,s.AH)(d||(d=l`:host{--wa-tooltip-background-color:var(--secondary-background-color);--wa-tooltip-content-color:var(--primary-text-color);--wa-tooltip-font-family:var(
            --ha-tooltip-font-family,
            var(--ha-font-family-body)
          );--wa-tooltip-font-size:var(
            --ha-tooltip-font-size,
            var(--ha-font-size-s)
          );--wa-tooltip-font-weight:var(
            --ha-tooltip-font-weight,
            var(--ha-font-weight-normal)
          );--wa-tooltip-line-height:var(
            --ha-tooltip-line-height,
            var(--ha-line-height-condensed)
          );--wa-tooltip-padding:8px;--wa-tooltip-border-radius:var(
            --ha-tooltip-border-radius,
            var(--ha-border-radius-sm)
          );--wa-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--wa-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}`))]}constructor(...e){super(...e),this.showDelay=150,this.hideDelay=150}}(0,a.__decorate)([(0,o.MZ)({attribute:"show-delay",type:Number})],c.prototype,"showDelay",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:"hide-delay",type:Number})],c.prototype,"hideDelay",void 0),c=(0,a.__decorate)([(0,o.EM)("ha-tooltip")],c),t()}catch(d){t(d)}})},55308:function(e,t,i){i(35748),i(95013);var a=i(69868),r=i(84922),s=i(11991);let o,n,d=e=>e;class l extends r.WF{render(){return(0,r.qy)(o||(o=d` <svg width="100%" height="100%" viewBox="0 0 48 48"> <line x1="24" y1="0" x2="24" y2="${0}"></line> <line x1="24" y1="24" x2="36" y2="24"></line> </svg> `),this.end?"24":"48")}constructor(...e){super(...e),this.end=!1}}l.styles=(0,r.AH)(n||(n=d`:host{display:block;width:48px;height:48px}line{stroke:var(--divider-color);stroke-width:2;stroke-dasharray:2}`)),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],l.prototype,"end",void 0),l=(0,a.__decorate)([(0,s.EM)("ha-tree-indicator")],l)},20639:function(e,t,i){i.d(t,{D:function(){return s}});i(35748),i(5934),i(95013);var a=i(44017);const r=()=>Promise.all([i.e("4268"),i.e("4242")]).then(i.bind(i,68505)),s=(e,t)=>(0,a.r)(e,"show-dialog",{dialogTag:"ha-dialog-target-details",dialogImport:r,dialogParams:t})},68645:function(e,t,i){i.a(e,async function(e,t){try{i(35748),i(65315),i(22416),i(37089),i(95013);var a=i(69868),r=i(84922),s=i(11991),o=(i(16520),i(97750),i(19386)),n=e([o]);o=(n.then?(await n)():n)[0];let d,l,c,h=e=>e;class p extends r.WF{render(){let e=0;return Object.values(this.items).forEach(t=>{t&&(e+=t.length)}),(0,r.qy)(d||(d=h`<ha-expansion-panel .expanded="${0}" left-chevron @expanded-changed="${0}"> <div slot="header" class="heading"> ${0} </div> ${0} </ha-expansion-panel>`),!this.collapsed,this._expandedChanged,this.hass.localize(`ui.components.target-picker.selected.${this.type}`,{count:e}),Object.entries(this.items).map(([e,t])=>t?t.map(t=>(0,r.qy)(l||(l=h`<ha-target-picker-item-row .hass="${0}" .type="${0}" .itemId="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"></ha-target-picker-item-row>`),this.hass,e,t,this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses)):r.s6))}_expandedChanged(e){this.collapsed=!e.detail.expanded}constructor(...e){super(...e),this.collapsed=!1}}p.styles=(0,r.AH)(c||(c=h`:host{display:block;--expansion-panel-content-padding:var(--ha-space-0)}ha-expansion-panel::part(summary){background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1) var(--ha-space-2);font-weight:var(--ha-font-weight-bold);color:var(--secondary-text-color);display:flex;justify-content:space-between;min-height:unset}ha-md-list{padding:var(--ha-space-0)}`)),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)()],p.prototype,"type",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"items",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],p.prototype,"collapsed",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"include-domains"})],p.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"include-device-classes"})],p.prototype,"includeDeviceClasses",void 0),p=(0,a.__decorate)([(0,s.EM)("ha-target-picker-item-group")],p),t()}catch(d){t(d)}})},19386:function(e,t,i){i.a(e,async function(e,t){try{i(79827),i(35748),i(99342),i(65315),i(837),i(84136),i(37089),i(59023),i(5934),i(18223),i(95013);var a=i(69868),r=i(97809),s=i(84922),o=i(11991),n=i(65940),d=i(44017),l=i(77832),c=i(191),h=i(88341),p=i(37240),u=i(73941),v=i(54e3),_=i(60993),m=i(32293),y=i(61964),g=i(18289),f=i(50809),b=i(71522),x=i(51964),$=(i(64054),i(97750),i(99260),i(84553)),w=(i(86160),i(20639)),k=e([$]);$=(k.then?(await k)():k)[0];let M,H,I,C,L,z,D,E,V,q,F,T,O,S,Z,j,A,P=e=>e;const R="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",W="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",B="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",N="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",Y="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";class K extends s.WF{willUpdate(e){!this.subEntry&&e.has("itemId")&&this._updateItemData()}render(){const{name:e,context:t,iconPath:i,fallbackIconPath:a,stateObject:r,notFound:o}=this._itemData(this.type,this.itemId),n="entity"!==this.type&&!o,d=this.parentEntries||this._entries;return!this.subEntry||"entity"===this.type||d&&0!==d.referenced_entities.length?(0,s.qy)(M||(M=P` <ha-md-list-item type="text" class="${0}"> <div class="icon" slot="start"> ${0} ${0} </div> <div slot="headline">${0}</div> ${0} ${0} ${0} ${0} </ha-md-list-item> ${0} `),o?"error":"",this.subEntry?(0,s.qy)(H||(H=P` <div class="horizontal-line-wrapper"> <div class="horizontal-line"></div> </div> `)):s.s6,i?(0,s.qy)(I||(I=P`<ha-icon .icon="${0}"></ha-icon>`),i):this._iconImg?(0,s.qy)(C||(C=P`<img alt="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}">`),this._domainName||"",this._iconImg):a?(0,s.qy)(L||(L=P`<ha-svg-icon .path="${0}"></ha-svg-icon>`),a):"entity"===this.type?(0,s.qy)(z||(z=P` <ha-state-icon .hass="${0}" .stateObj="${0}"> </ha-state-icon> `),this.hass,r||{entity_id:this.itemId,attributes:{}}):s.s6,e,o||t&&!this.hideContext?(0,s.qy)(D||(D=P`<span slot="supporting-text">${0}</span>`),o?this.hass.localize(`ui.components.target-picker.${this.type}_not_found`):t):s.s6,this._domainName&&this.subEntry?(0,s.qy)(E||(E=P`<span slot="supporting-text" class="domain">${0}</span>`),this._domainName):s.s6,!this.subEntry&&d&&n?(0,s.qy)(V||(V=P` <div slot="end" class="summary"> ${0} </div> `),n&&!this.expand&&null!=d&&d.referenced_entities.length?(0,s.qy)(q||(q=P`<button class="main link" @click="${0}"> ${0} </button>`),this._openDetails,this.hass.localize("ui.components.target-picker.entities_count",{count:null==d?void 0:d.referenced_entities.length})):n?(0,s.qy)(F||(F=P`<span class="main"> ${0} </span>`),this.hass.localize("ui.components.target-picker.entities_count",{count:null==d?void 0:d.referenced_entities.length})):s.s6):s.s6,this.expand||this.subEntry?s.s6:(0,s.qy)(T||(T=P` <ha-icon-button .path="${0}" slot="end" @click="${0}"></ha-icon-button> `),R,this._removeItem),this.expand&&d&&d.referenced_entities?this._renderEntries():s.s6):s.s6}_renderEntries(){const e=this.parentEntries||this._entries;let t="floor"===this.type?"area":"area"===this.type?"device":"entity";"label"===this.type&&(null!=e&&e.referenced_areas.length?t="area":null!=e&&e.referenced_devices.length&&(t="device"));const i=("area"===t?null==e?void 0:e.referenced_areas:"device"===t&&"label"!==this.type?null==e?void 0:e.referenced_devices:"label"!==this.type?null==e?void 0:e.referenced_entities:[])||[],a=[],r="entity"===t?void 0:i.map(i=>{const r={referenced_areas:[],referenced_devices:[],referenced_entities:[]};return"area"===t?(r.referenced_devices=(null==e?void 0:e.referenced_devices.filter(t=>{var a;return(null===(a=this.hass.devices)||void 0===a||null===(a=a[t])||void 0===a?void 0:a.area_id)===i&&(null==e?void 0:e.referenced_entities.some(e=>{var i;return(null===(i=this.hass.entities)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.device_id)===t}))}))||[],a.push(...r.referenced_devices),r.referenced_entities=(null==e?void 0:e.referenced_entities.filter(e=>{const t=this.hass.entities[e];return t.area_id===i||!t.device_id||r.referenced_devices.includes(t.device_id)}))||[],r):(r.referenced_entities=(null==e?void 0:e.referenced_entities.filter(e=>{var t;return(null===(t=this.hass.entities)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.device_id)===i}))||[],r)}),o="label"===this.type&&e?e.referenced_entities.filter(t=>{const i=this.hass.entities[t];return i.labels.includes(this.itemId)&&!e.referenced_devices.includes(i.device_id||"")}):"device"===t&&e?e.referenced_entities.filter(e=>this.hass.entities[e].area_id===this.itemId):[],n="label"===this.type&&e?e.referenced_devices.filter(e=>!a.includes(e)&&this.hass.devices[e].labels.includes(this.itemId)):[],d=0===n.length?void 0:n.map(t=>({referenced_areas:[],referenced_devices:[],referenced_entities:(null==e?void 0:e.referenced_entities.filter(e=>{var i;return(null===(i=this.hass.entities)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.device_id)===t}))||[]}));return(0,s.qy)(O||(O=P` <div class="entries-tree"> <div class="line-wrapper"> <div class="line"></div> </div> <ha-md-list class="entries"> ${0} ${0} ${0} </ha-md-list> </div> `),i.map((e,i)=>(0,s.qy)(S||(S=P` <ha-target-picker-item-row sub-entry .hass="${0}" .type="${0}" .itemId="${0}" .parentEntries="${0}" .hideContext="${0}" expand></ha-target-picker-item-row> `),this.hass,t,e,null==r?void 0:r[i],this.hideContext||"label"!==this.type)),n.map((e,t)=>(0,s.qy)(Z||(Z=P` <ha-target-picker-item-row sub-entry .hass="${0}" type="device" .itemId="${0}" .parentEntries="${0}" .hideContext="${0}" expand></ha-target-picker-item-row> `),this.hass,e,null==d?void 0:d[t],this.hideContext||"label"!==this.type)),o.map(e=>(0,s.qy)(j||(j=P` <ha-target-picker-item-row sub-entry .hass="${0}" type="entity" .itemId="${0}" .hideContext="${0}"></ha-target-picker-item-row> `),this.hass,e,this.hideContext||"label"!==this.type)))}async _updateItemData(){if("entity"!==this.type)try{const e=await(0,g.F7)(this.hass,{[`${this.type}_id`]:[this.itemId]}),t=[];"floor"!==this.type&&"label"!==this.type||(e.referenced_areas=e.referenced_areas.filter(e=>{const i=this.hass.areas[e];return!("floor"!==this.type&&!i.labels.includes(this.itemId)||!(0,g.Kx)(i,this.hass.devices,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter))||(t.push(e),!1)}));const i=[];"floor"!==this.type&&"area"!==this.type&&"label"!==this.type||(e.referenced_devices=e.referenced_devices.filter(e=>{const a=this.hass.devices[e];return!(t.includes(a.area_id||"")||!(0,g.Ly)(a,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter))||(i.push(e),!1)})),e.referenced_entities=e.referenced_entities.filter(t=>{const a=this.hass.entities[t];return!i.includes(a.device_id||"")&&(!!("area"===this.type&&a.area_id===this.itemId||"floor"===this.type&&a.area_id&&e.referenced_areas.includes(a.area_id)||"label"===this.type&&a.labels.includes(this.itemId)||e.referenced_devices.includes(a.device_id||""))&&(0,g.YK)(a,"label"===this.type,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter))}),this._entries=e}catch(e){console.error("Failed to extract target",e)}else this._entries=void 0}_setDomainName(e){this._domainName=(0,y.p$)(this.hass.localize,e)}_removeItem(e){e.stopPropagation(),(0,d.r)(this,"remove-target-item",{type:this.type,id:this.itemId})}async _getDeviceDomain(e){try{var t;const i=(await(0,_.Vx)(this.hass,e)).config_entry.domain;this._iconImg=(0,b.MR)({domain:i,type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._setDomainName(i)}catch(i){}}_openDetails(){(0,w.D)(this,{title:this._itemData(this.type,this.itemId).name,type:this.type,itemId:this.itemId,deviceFilter:this.deviceFilter,entityFilter:this.entityFilter,includeDomains:this.includeDomains,includeDeviceClasses:this.includeDeviceClasses})}constructor(...e){super(...e),this.expand=!1,this.subEntry=!1,this.hideContext=!1,this._itemData=(0,n.A)((e,t)=>{if("floor"===e){var i;const e=null===(i=this.hass.floors)||void 0===i?void 0:i[t];return{name:(null==e?void 0:e.name)||t,iconPath:null==e?void 0:e.icon,fallbackIconPath:e?(0,x.Si)(e):B,notFound:!e}}if("area"===e){var a,r;const e=null===(a=this.hass.areas)||void 0===a?void 0:a[t];return{name:(null==e?void 0:e.name)||t,context:(null==e?void 0:e.floor_id)&&(null===(r=this.hass.floors)||void 0===r||null===(r=r[e.floor_id])||void 0===r?void 0:r.name),iconPath:null==e?void 0:e.icon,fallbackIconPath:Y,notFound:!e}}if("device"===e){var s,o;const e=null===(s=this.hass.devices)||void 0===s?void 0:s[t];return null!=e&&e.primary_config_entry&&this._getDeviceDomain(e.primary_config_entry),{name:e?(0,c.T)(e,this.hass):t,context:(null==e?void 0:e.area_id)&&(null===(o=this.hass.areas)||void 0===o||null===(o=o[e.area_id])||void 0===o?void 0:o.name),fallbackIconPath:W,notFound:!e}}if("entity"===e){this._setDomainName((0,h.m)(t));const e=this.hass.states[t],i=e?(0,p.aH)(e,this.hass.entities,this.hass.devices):t,{area:a,device:r}=e?(0,u.l)(e,this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors):{area:void 0,device:void 0},s=r?(0,c.xn)(r):void 0,o=[a?(0,l.A)(a):void 0,i?s:void 0].filter(Boolean).join((0,v.qC)(this.hass)?" ◂ ":" ▸ ");return{name:i||s||t,context:o,stateObject:e,notFound:!e}}const n=this._labelRegistry.find(e=>e.label_id===t);return{name:(null==n?void 0:n.name)||t,iconPath:null==n?void 0:n.icon,fallbackIconPath:N,notFound:!n}})}}K.styles=[f.og,(0,s.AH)(A||(A=P`:host{--md-list-item-top-space:var(--ha-space-0);--md-list-item-bottom-space:var(--ha-space-0);--md-list-item-leading-space:var(--ha-space-2);--md-list-item-trailing-space:var(--ha-space-2);--md-list-item-two-line-container-height:56px}:host([expand]:not([sub-entry])) ha-md-list-item{border:2px solid var(--ha-color-border-neutral-loud);background-color:var(--ha-color-fill-neutral-quiet-resting);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.error{background:var(--ha-color-fill-warning-quiet-resting)}.error [slot=supporting-text]{color:var(--ha-color-on-warning-normal)}state-badge{color:var(--ha-color-on-neutral-quiet)}.icon{width:24px;display:flex}img{width:24px;height:24px;z-index:1}ha-icon-button{--mdc-icon-button-size:32px}.summary{display:flex;flex-direction:column;align-items:flex-end;line-height:var(--ha-line-height-condensed)}:host([sub-entry]) .summary{margin-right:var(--ha-space-12)}.summary .main{font-weight:var(--ha-font-weight-medium)}.summary .secondary{font-size:var(--ha-font-size-s);color:var(--secondary-text-color)}.entries-tree{display:flex;position:relative}.entries-tree .line-wrapper{padding:var(--ha-space-5)}.entries-tree .line-wrapper .line{border-left:2px dashed var(--divider-color);height:calc(100% - 28px);position:absolute;top:0}:host([sub-entry]) .entries-tree .line-wrapper .line{height:calc(100% - 12px);top:-18px}.entries{padding:0;--md-item-overflow:visible}.horizontal-line-wrapper{position:relative}.horizontal-line-wrapper .horizontal-line{position:absolute;top:11px;margin-inline-start:-28px;width:29px;border-top:2px dashed var(--divider-color)}button.link{text-decoration:none;color:var(--primary-color)}button.link:focus,button.link:hover{text-decoration:underline}.domain{width:fit-content;border-radius:var(--ha-border-radius-md);background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1);font-family:var(--ha-font-family-code)}`))],(0,a.__decorate)([(0,o.MZ)({attribute:!1})],K.prototype,"hass",void 0),(0,a.__decorate)([(0,o.MZ)({reflect:!0})],K.prototype,"type",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:"item-id"})],K.prototype,"itemId",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],K.prototype,"expand",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,attribute:"sub-entry",reflect:!0})],K.prototype,"subEntry",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,attribute:"hide-context"})],K.prototype,"hideContext",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],K.prototype,"parentEntries",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],K.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],K.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],K.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],K.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,o.wk)()],K.prototype,"_iconImg",void 0),(0,a.__decorate)([(0,o.wk)()],K.prototype,"_domainName",void 0),(0,a.__decorate)([(0,o.wk)()],K.prototype,"_entries",void 0),(0,a.__decorate)([(0,o.wk)(),(0,r.Fg)({context:m.HD,subscribe:!0})],K.prototype,"_labelRegistry",void 0),(0,a.__decorate)([(0,o.P)("ha-md-list-item")],K.prototype,"item",void 0),(0,a.__decorate)([(0,o.P)("ha-md-list")],K.prototype,"list",void 0),(0,a.__decorate)([(0,o.P)("ha-target-picker-item-row")],K.prototype,"itemRow",void 0),K=(0,a.__decorate)([(0,o.EM)("ha-target-picker-item-row")],K),t()}catch(M){t(M)}})},30313:function(e,t,i){i.a(e,async function(e,t){try{i(35748),i(99342),i(86149),i(65315),i(37089),i(12977),i(52885),i(5934),i(56660),i(39118),i(95013);var a=i(69868),r=i(97809),s=i(88970),o=i(84922),n=i(11991),d=i(7577),l=i(65940),c=i(60393),h=i(11111),p=i(44017),u=i(54e3),v=i(5296),_=i(60993),m=i(32293),y=i(95968),g=i(59569),f=i(61964),b=i(40804),x=i(47225),$=i(8330),w=i(50809),k=i(78100),M=i(71522),H=(i(75831),i(8101),i(6595)),I=(i(99322),i(51964),i(97750),i(86160),i(80287),i(55308),e([H]));H=(I.then?(await I)():I)[0];let C,L,z,D,E,V,q,F,T,O,S,Z,j,A,P,R,W,B,N=e=>e;const Y="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",K="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",G="________",U="___EMPTY_SEARCH___",X="___create-new-entity___";class J extends o.WF{willUpdate(e){super.willUpdate(e),this.hasUpdated||(this._loadConfigEntries(),(0,k.i)())}firstUpdated(){this._registerKeyboardShortcuts()}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._removeKeyboardShortcuts)||void 0===e||e.call(this)}async _loadConfigEntries(){const e=await(0,_.VN)(this.hass);this._configEntryLookup=Object.fromEntries(e.map(e=>[e.entry_id,e]))}render(){return(0,o.qy)(C||(C=N` <ha-textfield .label="${0}" @input="${0}" .value="${0}"></ha-textfield> <ha-chip-set class="filter">${0}</ha-chip-set> <div class="filter-header-wrapper"> <div class="filter-header ${0}"> ${0} </div> </div> <lit-virtualizer tabindex="0" scroller .keyFunction="${0}" .items="${0}" .renderItem="${0}" @scroll="${0}" class="list ${0}" style="min-height:56px" @visibilityChanged="${0}" @focus="${0}"> </lit-virtualizer> `),this.hass.localize("ui.common.search"),this._searchChanged,this._searchTerm,this._renderFilterButtons(),!this.filterType&&this._filterHeader?"show":"",this._filterHeader,this._keyFunction,this._getItems(this.entityFilter,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.targetValue,this._searchTerm,this.createDomains,this._configEntryLookup,this.mode,this.filterType),this._renderRow,this._onScrollList,this._listScrolled?"scrolled":"",this._visibilityChanged,this._focusList)}_visibilityChanged(e){if(this._virtualizerElement){const t=this._virtualizerElement.items[e.first],i=this._virtualizerElement.items[e.first+1];if(void 0===t||void 0===i||"string"==typeof t||"string"==typeof i&&"padding"!==i||0===e.first&&e.last===this._virtualizerElement.items.length-1)return void(this._filterHeader=void 0);const a=this._getRowType(t),r="area"===a||"floor"===a?"areas":"entity"===a?"entities":a&&"empty"!==a?`${a}s`:void 0;this._filterHeader=r?this._filterHeader=this.hass.localize(`ui.components.target-picker.type.${r}`):void 0}}_registerKeyboardShortcuts(){this._removeKeyboardShortcuts=(0,c.Tc)(this,{ArrowUp:this._selectPreviousItem,ArrowDown:this._selectNextItem,Home:this._selectFirstItem,End:this._selectLastItem,Enter:this._pickSelectedItem})}_focusList(){-1===this._selectedItemIndex&&this._selectNextItem()}_renderFilterButtons(){return["entity","device","area","separator","label"].map(e=>{if("separator"===e)return(0,o.qy)(L||(L=N`<div class="separator"></div>`));const t=this.filterType===e;return(0,o.qy)(z||(z=N` <ha-filter-chip @click="${0}" .type="${0}" .selected="${0}" .label="${0}"> </ha-filter-chip> `),this._toggleFilter,e,t,this.hass.localize("ui.components.target-picker.type."+("entity"===e?"entities":`${e}s`)))})}_filterGroup(e,t,i){const a=this._fuseIndexes[e](t),r=new $.b(t,{shouldSort:!1,minMatchCharLength:Math.min(this._searchTerm.length,2)},a).multiTermsSearch(this._searchTerm);let s=t;if(r&&(s=r.map(e=>e.item)),!i)return s;const o=s.findIndex(e=>i(e));if(-1===o)return s;const[n]=s.splice(o,1);return s.unshift(n),s}_searchChanged(e){const t=e.target.value.trim();this._searchTerm=t,this._resetSelectedItem()}get _showEntityId(){var e;return null===(e=this.hass.userData)||void 0===e?void 0:e.showEntityIdPicker}_toggleFilter(e){e.stopPropagation(),this._resetSelectedItem(),this._filterHeader=void 0;const t=e.target.type;t&&(this.filterType===t?this.filterType=void 0:this.filterType=t,this._virtualizerElement&&this._virtualizerElement.scrollToIndex(0),(0,p.r)(this,"filter-type-changed",this.filterType))}_onScrollList(e){var t;const i=null!==(t=e.target.scrollTop)&&void 0!==t?t:0;this._listScrolled=i>0}_resetSelectedItem(){var e;null===(e=this._virtualizerElement)||void 0===e||null===(e=e.querySelector(".selected"))||void 0===e||e.classList.remove("selected"),this._selectedItemIndex=-1}constructor(...e){super(...e),this.mode="popover",this._searchTerm="",this._listScrolled=!1,this._configEntryLookup={},this._selectedItemIndex=-1,this._getDevicesMemoized=(0,l.A)(y.oG),this._getLabelsMemoized=(0,l.A)(b.IV),this._getEntitiesMemoized=(0,l.A)(g.wz),this._getAreasAndFloorsMemoized=(0,l.A)(v.b),this._selectNextItem=e=>{var t,i;if(null==e||e.stopPropagation(),null==e||e.preventDefault(),!this._virtualizerElement)return;null===(t=this._searchFieldElement)||void 0===t||t.focus();const a=this._virtualizerElement.items,r=a.length-1;if(-1===r)return void this._resetSelectedItem();const s=r===this._selectedItemIndex?this._selectedItemIndex:this._selectedItemIndex+1;if(a[s]){if("string"==typeof a[s]||(null===(i=a[s])||void 0===i?void 0:i.id)===U){if(s===r)return;this._selectedItemIndex=s+1}else this._selectedItemIndex=s;this._scrollToSelectedItem()}},this._selectPreviousItem=e=>{if(e.stopPropagation(),e.preventDefault(),this._virtualizerElement&&this._selectedItemIndex>0){var t;const e=this._selectedItemIndex-1,i=this._virtualizerElement.items;if(!i[e])return;if("string"==typeof i[e]||(null===(t=i[e])||void 0===t?void 0:t.id)===U){if(0===e)return;this._selectedItemIndex=e-1}else this._selectedItemIndex=e;this._scrollToSelectedItem()}},this._selectFirstItem=e=>{var t;if(e.stopPropagation(),!this._virtualizerElement||!this._virtualizerElement.items.length)return;(null===(t=this._virtualizerElement.items[0])||void 0===t?void 0:t.id)!==U&&("string"==typeof this._virtualizerElement.items[0]?this._selectedItemIndex=1:this._selectedItemIndex=0,this._scrollToSelectedItem())},this._selectLastItem=e=>{var t;if(e.stopPropagation(),!this._virtualizerElement||!this._virtualizerElement.items.length)return;const i=this._virtualizerElement.items.length-1;(null===(t=this._virtualizerElement.items[i])||void 0===t?void 0:t.id)!==U&&("string"==typeof this._virtualizerElement.items[i]?this._selectedItemIndex=i-1:this._selectedItemIndex=i,this._scrollToSelectedItem())},this._scrollToSelectedItem=()=>{var e,t;null===(e=this._virtualizerElement)||void 0===e||null===(e=e.querySelector(".selected"))||void 0===e||e.classList.remove("selected"),null===(t=this._virtualizerElement)||void 0===t||t.scrollToIndex(this._selectedItemIndex,"end"),requestAnimationFrame(()=>{var e;null===(e=this._virtualizerElement)||void 0===e||null===(e=e.querySelector(`#list-item-${this._selectedItemIndex}`))||void 0===e||e.classList.add("selected")})},this._pickSelectedItem=e=>{var t;if(-1===this._selectedItemIndex)return;e.preventDefault();const i=null===(t=this._virtualizerElement)||void 0===t?void 0:t.items[this._selectedItemIndex];i&&"string"!=typeof i&&this._pickTarget(i.id,"domain"in i?"device":"stateObj"in i?"entity":i.type?"area":"label")},this._getRowType=e=>"area"===e.type||"floor"===e.type?e.type:"domain"in e?"device":"stateObj"in e?"entity":e.id===U?"empty":"label",this._renderRow=(e,t)=>{var i;if(!e)return o.s6;if("string"==typeof e)return"padding"===e?(0,o.qy)(D||(D=N`<div class="bottom-padding"></div>`)):(0,o.qy)(E||(E=N`<div class="title">${0}</div>`),e);const a=this._getRowType(e);let r=!1,s=!1,n=!1;var l,c;"area"!==a&&"floor"!==a||(e.id=null===(l=e[a])||void 0===l?void 0:l[`${a}_id`],s=(0,u.qC)(this.hass),r="area"===a&&!(null===(c=e.area)||void 0===c||!c.floor_id));return"entity"===a&&(n=!!this._showEntityId),(0,o.qy)(V||(V=N` <ha-combo-box-item id="${0}" tabindex="-1" .type="${0}" class="${0}" @click="${0}" .targetType="${0}" .targetId="${0}" style="${0}"> ${0} ${0} <span slot="headline">${0}</span> ${0} ${0} ${0} </ha-combo-box-item> `),`list-item-${t}`,"empty"===a?"text":"button","empty"===a?"empty":"",this._handlePickTarget,a,"empty"!==a?e.id:void 0,"area"===e.type&&r?"--md-list-item-leading-space: var(--ha-space-12);":"","area"===e.type&&r?(0,o.qy)(q||(q=N` <ha-tree-indicator style="${0}" .end="${0}" slot="start"></ha-tree-indicator> `),(0,d.W)({width:"var(--ha-space-12)",position:"absolute",top:"var(--ha-space-0)",left:s?void 0:"var(--ha-space-1)",right:s?"var(--ha-space-1)":void 0,transform:s?"scaleX(-1)":""}),e.last):o.s6,e.icon?(0,o.qy)(F||(F=N`<ha-icon slot="start" .icon="${0}"></ha-icon>`),e.icon):e.icon_path?(0,o.qy)(T||(T=N`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),e.icon_path):"entity"===a&&e.stateObj?(0,o.qy)(O||(O=N` <state-badge slot="start" .stateObj="${0}" .hass="${0}"></state-badge> `),e.stateObj,this.hass):"device"===a&&e.domain?(0,o.qy)(S||(S=N` <img slot="start" alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}"> `),(0,M.MR)({domain:e.domain,type:"icon",darkOptimized:this.hass.themes.darkMode})):"floor"===a?(0,o.qy)(Z||(Z=N`<ha-floor-icon slot="start" .floor="${0}"></ha-floor-icon>`),e.floor):"area"===a?(0,o.qy)(j||(j=N`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),e.icon_path||K):o.s6,e.primary,e.secondary?(0,o.qy)(A||(A=N`<span slot="supporting-text">${0}</span>`),e.secondary):o.s6,e.stateObj&&n?(0,o.qy)(P||(P=N` <span slot="supporting-text" class="code"> ${0} </span> `),null===(i=e.stateObj)||void 0===i?void 0:i.entity_id):o.s6,!e.domain_name||"entity"===a&&n?o.s6:(0,o.qy)(R||(R=N` <div slot="trailing-supporting-text" class="domain"> ${0} </div> `),e.domain_name))},this._keyFunction=e=>{if("string"==typeof e)return"padding"===e?"padding":`title-${e}`;const t=this._getRowType(e);return"empty"===t?"empty-search":"area"===t||"floor"===t?`${t}-${null===(i=e[t])||void 0===i?void 0:i[`${t}_id`]}`:`${t}-${e.id}`;var i},this._getItems=(0,l.A)((e,t,i,a,r,s,n,d,c,p)=>{const u=[];if(!p||"entity"===p){let t=this._getEntitiesMemoized(this.hass,i,void 0,e,a,void 0,void 0,null!=r&&r.entity_id?(0,h.e)(r.entity_id):void 0);s&&(t=this._filterGroup("entity",t,e=>{var t;return(null===(t=e.stateObj)||void 0===t?void 0:t.entity_id)===s})),!p&&t.length&&u.push(this.hass.localize("ui.components.target-picker.type.entities")),u.push(...t)}if(!p||"device"===p){let o=this._getDevicesMemoized(this.hass,d,i,void 0,a,t,e,null!=r&&r.device_id?(0,h.e)(r.device_id):void 0);s&&(o=this._filterGroup("device",o)),!p&&o.length&&u.push(this.hass.localize("ui.components.target-picker.type.devices")),u.push(...o)}if(!p||"area"===p){let o=this._getAreasAndFloorsMemoized(this.hass.states,this.hass.floors,this.hass.areas,this.hass.devices,this.hass.entities,(0,l.A)(e=>[e.type,e.id].join(G)),i,void 0,a,t,e,null!=r&&r.area_id?(0,h.e)(r.area_id):void 0,null!=r&&r.floor_id?(0,h.e)(r.floor_id):void 0);s&&(o=this._filterGroup("area",o)),!p&&o.length&&u.push(this.hass.localize("ui.components.target-picker.type.areas")),u.push(...o.map((e,t)=>{const i=o[t+1];return!i||"area"===e.type&&"floor"===i.type?Object.assign(Object.assign({},e),{},{last:!0}):e}))}if(!p||"label"===p){let o=this._getLabelsMemoized(this.hass,this._labelRegistry,i,void 0,a,t,e,null!=r&&r.label_id?(0,h.e)(r.label_id):void 0);s&&(o=this._filterGroup("label",o)),!p&&o.length&&u.push(this.hass.localize("ui.components.target-picker.type.labels")),u.push(...o)}return u.push(...this._getCreateItems(n)),s&&0===u.length?u.push({id:U,primary:this.hass.localize("ui.components.target-picker.no_target_found",{term:(0,o.qy)(W||(W=N`<div><b>‘${0}’</b></div>`),s)})}):0===u.length&&u.push({id:U,primary:this.hass.localize("ui.components.target-picker.no_targets")}),"dialog"===c&&u.push("padding"),u}),this._getCreateItems=(0,l.A)(e=>null!=e&&e.length?e.map(e=>{const t=this.hass.localize("ui.components.entity.entity-picker.create_helper",{domain:(0,x.z)(e)?this.hass.localize(`ui.panel.config.helpers.types.${e}`):(0,f.p$)(this.hass.localize,e)});return{id:X+e,primary:t,secondary:this.hass.localize("ui.components.entity.entity-picker.new_entity"),icon_path:Y}}):[]),this._fuseIndexes={area:(0,l.A)(e=>this._createFuseIndex(e)),entity:(0,l.A)(e=>this._createFuseIndex(e)),device:(0,l.A)(e=>this._createFuseIndex(e)),label:(0,l.A)(e=>this._createFuseIndex(e))},this._createFuseIndex=e=>s.A.createIndex(["search_labels"],e),this._handlePickTarget=e=>{var t,i;const a=null===(t=e.currentTarget)||void 0===t?void 0:t.targetId,r=null===(i=e.currentTarget)||void 0===i?void 0:i.targetType;a&&r&&this._pickTarget(a,r)},this._pickTarget=(e,t)=>{if("label"!==t||e!==U){if(e.startsWith(X)){const t=e.substring(X.length);return void(0,p.r)(this,"create-domain-picked",t)}(0,p.r)(this,"target-picked",{id:e,type:t})}}}}J.shadowRootOptions=Object.assign(Object.assign({},o.WF.shadowRootOptions),{},{delegatesFocus:!0}),J.styles=[w.dp,(0,o.AH)(B||(B=N`:host{display:flex;flex-direction:column;padding-top:var(--ha-space-3);flex:1}ha-textfield{padding:0 var(--ha-space-3)}.filter{display:flex;flex-wrap:nowrap;gap:var(--ha-space-2);padding:var(--ha-space-3) var(--ha-space-3);overflow:auto}:host([mode=dialog]) .filter{padding:var(--ha-space-3) var(--ha-space-4)}.filter ha-filter-chip{flex-shrink:0;--md-filter-chip-selected-container-color:var(--ha-color-fill-primary-normal-hover);color:var(--primary-color)}.filter .separator{height:var(--ha-space-8);width:0;border:1px solid var(--ha-color-border-neutral-quiet)}.filter-header,.title{background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1) var(--ha-space-2);font-weight:var(--ha-font-weight-bold);color:var(--secondary-text-color);min-height:var(--ha-space-6);display:flex;align-items:center}.title{width:100%;min-height:var(--ha-space-8)}:host([mode=dialog]) .title{padding:var(--ha-space-1) var(--ha-space-4)}:host([mode=dialog]) ha-textfield{padding:0 var(--ha-space-4)}ha-combo-box-item{width:100%}ha-combo-box-item.selected{background-color:var(--ha-color-fill-neutral-quiet-hover)}@media (prefers-color-scheme:dark){ha-combo-box-item.selected{background-color:var(--ha-color-fill-neutral-normal-hover)}}.filter-header-wrapper{height:0;position:relative}.filter-header{opacity:0;position:absolute;top:1px;width:calc(100% - var(--ha-space-8))}.filter-header.show{opacity:1;z-index:1}lit-virtualizer{flex:1}lit-virtualizer:focus-visible{outline:0}lit-virtualizer.scrolled{border-top:1px solid var(--ha-color-border-neutral-quiet)}.bottom-padding{height:max(var(--safe-area-inset-bottom,0px),var(--ha-space-8));width:100%}.empty{text-align:center}`))],(0,a.__decorate)([(0,n.MZ)({attribute:!1})],J.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],J.prototype,"filterType",void 0),(0,a.__decorate)([(0,n.MZ)({reflect:!0})],J.prototype,"mode",void 0),(0,a.__decorate)([(0,n.MZ)({type:Array,attribute:"include-domains"})],J.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,n.MZ)({type:Array,attribute:"include-device-classes"})],J.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],J.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],J.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],J.prototype,"targetValue",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1,type:Array})],J.prototype,"createDomains",void 0),(0,a.__decorate)([(0,n.P)("lit-virtualizer")],J.prototype,"_virtualizerElement",void 0),(0,a.__decorate)([(0,n.P)("ha-textfield")],J.prototype,"_searchFieldElement",void 0),(0,a.__decorate)([(0,n.wk)()],J.prototype,"_searchTerm",void 0),(0,a.__decorate)([(0,n.wk)()],J.prototype,"_listScrolled",void 0),(0,a.__decorate)([(0,n.wk)()],J.prototype,"_configEntryLookup",void 0),(0,a.__decorate)([(0,n.wk)()],J.prototype,"_filterHeader",void 0),(0,a.__decorate)([(0,n.wk)(),(0,r.Fg)({context:m.HD,subscribe:!0})],J.prototype,"_labelRegistry",void 0),(0,a.__decorate)([(0,n.Ls)({passive:!0})],J.prototype,"_visibilityChanged",null),(0,a.__decorate)([(0,n.Ls)({passive:!0})],J.prototype,"_onScrollList",null),J=(0,a.__decorate)([(0,n.EM)("ha-target-picker-selector")],J),t()}catch(C){t(C)}})},80578:function(e,t,i){i.a(e,async function(e,t){try{i(35748),i(65315),i(84136),i(5934),i(56660),i(95013);var a=i(69868),r=i(97809),s=i(948),o=i(84922),n=i(11991),d=i(75907),l=i(65940),c=i(78412),h=i(83510),p=i(44017),u=i(191),v=i(88341),_=i(72652),m=i(63870),y=i(60993),g=i(32293),f=i(61964),b=i(71522),x=i(51964),$=(i(64054),i(97750),i(99260),i(84553)),w=i(7245),k=e([$,w]);[$,w]=k.then?(await k)():k;let M,H,I,C,L,z,D,E=e=>e;const V="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",q="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",F="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",T="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",O="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",S="M18.17,12L15,8.83L16.41,7.41L21,12L16.41,16.58L15,15.17L18.17,12M5.83,12L9,15.17L7.59,16.59L3,12L7.59,7.42L9,8.83L5.83,12Z";class Z extends o.WF{render(){const{name:e,iconPath:t,fallbackIconPath:i,stateObject:a,color:r}=this._itemData(this.type,this.itemId);return(0,o.qy)(M||(M=E` <div class="mdc-chip ${0}" style="${0}"> ${0} <span role="gridcell"> <span role="button" tabindex="0" class="mdc-chip__primary-action"> <span id="title-${0}" class="mdc-chip__text">${0}</span> </span> </span> ${0} <span role="gridcell"> <ha-tooltip .for="remove-${0}"> ${0} </ha-tooltip> <ha-icon-button class="mdc-chip__icon mdc-chip__icon--trailing" .label="${0}" .path="${0}" hide-title .id="remove-${0}" .type="${0}" @click="${0}"></ha-icon-button> </span> </div> `),(0,d.H)({[this.type]:!0}),r?`--color: rgb(${r}); --background-color: rgba(${r}, .5)`:"",t?(0,o.qy)(H||(H=E`<ha-icon class="mdc-chip__icon mdc-chip__icon--leading" .icon="${0}"></ha-icon>`),t):this._iconImg?(0,o.qy)(I||(I=E`<img class="mdc-chip__icon mdc-chip__icon--leading" alt="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}">`),this._domainName||"",this._iconImg):i?(0,o.qy)(C||(C=E`<ha-svg-icon class="mdc-chip__icon mdc-chip__icon--leading" .path="${0}"></ha-svg-icon>`),i):a?(0,o.qy)(L||(L=E`<ha-state-icon class="mdc-chip__icon mdc-chip__icon--leading" .hass="${0}" .stateObj="${0}"></ha-state-icon>`),this.hass,a):o.s6,this.itemId,e,"entity"===this.type?o.s6:(0,o.qy)(z||(z=E`<span role="gridcell"> <ha-tooltip .for="expand-${0}">${0} </ha-tooltip> <ha-icon-button class="expand-btn mdc-chip__icon mdc-chip__icon--trailing" .label="${0}" .path="${0}" hide-title .id="expand-${0}" .type="${0}" @click="${0}"></ha-icon-button> </span>`),(0,m.Y)(this.itemId),this.hass.localize(`ui.components.target-picker.expand_${this.type}_id`),this.hass.localize("ui.components.target-picker.expand"),S,(0,m.Y)(this.itemId),this.type,this._handleExpand),(0,m.Y)(this.itemId),this.hass.localize(`ui.components.target-picker.remove_${this.type}_id`),this.hass.localize("ui.components.target-picker.remove"),V,(0,m.Y)(this.itemId),this.type,this._removeItem)}_setDomainName(e){this._domainName=(0,f.p$)(this.hass.localize,e)}async _getDeviceDomain(e){try{var t;const i=(await(0,y.Vx)(this.hass,e)).config_entry.domain;this._iconImg=(0,b.MR)({domain:i,type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._setDomainName(i)}catch(i){}}_removeItem(e){e.stopPropagation(),(0,p.r)(this,"remove-target-item",{type:this.type,id:this.itemId})}_handleExpand(e){e.stopPropagation(),(0,p.r)(this,"expand-target-item",{type:this.type,id:this.itemId})}constructor(...e){super(...e),this._itemData=(0,l.A)((e,t)=>{var i,a;if("floor"===e){var r;const e=null===(r=this.hass.floors)||void 0===r?void 0:r[t];return{name:(null==e?void 0:e.name)||t,iconPath:null==e?void 0:e.icon,fallbackIconPath:e?(0,x.Si)(e):F}}if("area"===e){var s;const e=null===(s=this.hass.areas)||void 0===s?void 0:s[t];return{name:(null==e?void 0:e.name)||t,iconPath:null==e?void 0:e.icon,fallbackIconPath:O}}if("device"===e){var o;const e=null===(o=this.hass.devices)||void 0===o?void 0:o[t];return e.primary_config_entry&&this._getDeviceDomain(e.primary_config_entry),{name:e?(0,u.T)(e,this.hass):t,fallbackIconPath:q}}if("entity"===e){this._setDomainName((0,v.m)(t));const e=this.hass.states[t];return{name:(0,_.u)(e)||t,stateObject:e}}const n=this._labelRegistry.find(e=>e.label_id===t);let d=null!=n&&n.color?(0,c.M)(n.color):void 0;if(null!==(i=d)&&void 0!==i&&i.startsWith("var(")){d=getComputedStyle(this).getPropertyValue(d.substring(4,d.length-1))}return null!==(a=d)&&void 0!==a&&a.startsWith("#")&&(d=(0,h.xp)(d).join(",")),{name:(null==n?void 0:n.name)||t,iconPath:null==n?void 0:n.icon,fallbackIconPath:T,color:d}})}}Z.styles=(0,o.AH)(D||(D=E`${0} .mdc-chip{color:var(--primary-text-color)}.mdc-chip.add{color:rgba(0,0,0,.87)}.add-container{position:relative;display:inline-flex}.mdc-chip:not(.add){cursor:default}.mdc-chip ha-icon-button{--mdc-icon-button-size:24px;display:flex;align-items:center;outline:0}.mdc-chip ha-icon-button ha-svg-icon{border-radius:50%;background:var(--secondary-text-color)}.mdc-chip__icon.mdc-chip__icon--trailing{width:var(--ha-space-4);height:var(--ha-space-4);--mdc-icon-size:14px;color:var(--secondary-text-color);margin-inline-start:var(--ha-space-1)!important;margin-inline-end:calc(-1 * var(--ha-space-1))!important;direction:var(--direction)}.mdc-chip__icon--leading{display:flex;align-items:center;justify-content:center;--mdc-icon-size:20px;border-radius:var(--ha-border-radius-circle);padding:6px;margin-left:-13px!important;margin-inline-start:-13px!important;margin-inline-end:var(--ha-space-1)!important;direction:var(--direction)}.expand-btn{margin-right:var(--ha-space-0);margin-inline-end:var(--ha-space-0);margin-inline-start:initial}.mdc-chip.area:not(.add),.mdc-chip.floor:not(.add){border:1px solid #fed6a4;background:var(--card-background-color)}.mdc-chip.area.add,.mdc-chip.area:not(.add) .mdc-chip__icon--leading,.mdc-chip.floor.add,.mdc-chip.floor:not(.add) .mdc-chip__icon--leading{background:#fed6a4}.mdc-chip.device:not(.add){border:1px solid #a8e1fb;background:var(--card-background-color)}.mdc-chip.device.add,.mdc-chip.device:not(.add) .mdc-chip__icon--leading{background:#a8e1fb}.mdc-chip.entity:not(.add){border:1px solid #d2e7b9;background:var(--card-background-color)}.mdc-chip.entity.add,.mdc-chip.entity:not(.add) .mdc-chip__icon--leading{background:#d2e7b9}.mdc-chip.label:not(.add){border:1px solid var(--color,#e0e0e0);background:var(--card-background-color)}.mdc-chip.label.add,.mdc-chip.label:not(.add) .mdc-chip__icon--leading{background:var(--background-color,#e0e0e0)}.mdc-chip:hover{z-index:5}:host([disabled]) .mdc-chip{opacity:var(--light-disabled-opacity);pointer-events:none}.tooltip-icon-img{width:24px;height:24px}`),(0,o.iz)(s)),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],Z.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)()],Z.prototype,"type",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:"item-id"})],Z.prototype,"itemId",void 0),(0,a.__decorate)([(0,n.wk)()],Z.prototype,"_domainName",void 0),(0,a.__decorate)([(0,n.wk)()],Z.prototype,"_iconImg",void 0),(0,a.__decorate)([(0,n.wk)(),(0,r.Fg)({context:g.HD,subscribe:!0})],Z.prototype,"_labelRegistry",void 0),Z=(0,a.__decorate)([(0,n.EM)("ha-target-picker-value-chip")],Z),t()}catch(M){t(M)}})},5296:function(e,t,i){i.d(t,{b:function(){return d}});i(91949),i(79827),i(35748),i(99342),i(35058),i(41846),i(65315),i(12840),i(837),i(84136),i(22416),i(37089),i(59023),i(18223),i(95013);var a=i(77832),r=i(88341),s=i(52777),o=i(95968),n=i(8148);const d=(e,t,i,d,l,c,h,p,u,v,_,m,y)=>{const g=Object.values(t),f=Object.values(i),b=Object.values(d),x=Object.values(l);let $,w,k={};(h||p||u||v||_)&&(k=(0,o.g2)(x),$=b,w=x.filter(e=>e.area_id),h&&($=$.filter(e=>{const t=k[e.id];return!(!t||!t.length)&&k[e.id].some(e=>h.includes((0,r.m)(e.entity_id)))}),w=w.filter(e=>h.includes((0,r.m)(e.entity_id)))),p&&($=$.filter(e=>{const t=k[e.id];return!t||!t.length||x.every(e=>!p.includes((0,r.m)(e.entity_id)))}),w=w.filter(e=>!p.includes((0,r.m)(e.entity_id)))),u&&($=$.filter(t=>{const i=k[t.id];return!(!i||!i.length)&&k[t.id].some(t=>{const i=e[t.entity_id];return!!i&&(i.attributes.device_class&&u.includes(i.attributes.device_class))})}),w=w.filter(t=>{const i=e[t.entity_id];return i.attributes.device_class&&u.includes(i.attributes.device_class)})),v&&($=$.filter(e=>v(e))),_&&($=$.filter(t=>{const i=k[t.id];return!(!i||!i.length)&&k[t.id].some(t=>{const i=e[t.entity_id];return!!i&&_(i)})}),w=w.filter(t=>{const i=e[t.entity_id];return!!i&&_(i)})));let M,H=f;$&&(M=$.filter(e=>e.area_id).map(e=>e.area_id)),w&&(M=(null!=M?M:[]).concat(w.filter(e=>e.area_id).map(e=>e.area_id))),M&&(H=H.filter(e=>M.includes(e.area_id))),m&&(H=H.filter(e=>!m.includes(e.area_id))),y&&(H=H.filter(e=>!e.floor_id||!y.includes(e.floor_id)));const I=(0,n._o)(H),C=Object.values(H).filter(e=>!e.floor_id||!I[e.floor_id]),L=(0,n.eq)(t),z=Object.entries(I).map(([e,t])=>[g.find(t=>t.floor_id===e),t]).sort(([e],[t])=>L(e.floor_id,t.floor_id)),D=[];return z.forEach(([e,t])=>{if(e){const i=(0,s.X)(e),r=t.map(e=>{const t=(0,a.A)(e)||e.area_id;return[e.area_id,t,...e.aliases]}).flat();D.push({id:c({id:e.floor_id,type:"floor"}),type:"floor",primary:i,floor:e,icon:e.icon||void 0,search_labels:[e.floor_id,i,...e.aliases,...r]})}D.push(...t.map(e=>{const t=(0,a.A)(e)||e.area_id;return{id:c({id:e.area_id,type:"area"}),type:"area",primary:t,area:e,icon:e.icon||void 0,search_labels:[e.area_id,t,...e.aliases]}}))}),D.push(...C.map(e=>{const t=(0,a.A)(e)||e.area_id;return{id:c({id:e.area_id,type:"area"}),type:"area",primary:t,area:e,icon:e.icon||void 0,search_labels:[e.area_id,t,...e.aliases]}})),D}},72094:function(e,t,i){i.d(t,{Hg:function(){return a},e0:function(){return r}});i(79827),i(65315),i(37089),i(36874),i(12977),i(5934),i(90917),i(18223);const a=e=>e.map(e=>{if("string"!==e.type)return e;switch(e.name){case"username":return Object.assign(Object.assign({},e),{},{autocomplete:"username",autofocus:!0});case"password":return Object.assign(Object.assign({},e),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},e),{},{autocomplete:"one-time-code",autofocus:!0});default:return e}}),r=(e,t)=>e.callWS({type:"auth/sign_path",path:t})},60993:function(e,t,i){i.d(t,{VN:function(){return r},Vx:function(){return s},t0:function(){return a}});i(35748),i(65315),i(837),i(84136),i(12977),i(95013);const a=(e,t)=>e.callWS({type:"config_entries/subentries/list",entry_id:t}),r=(e,t)=>{const i={};return t&&(t.type&&(i.type_filter=t.type),t.domain&&(i.domain=t.domain)),e.callWS(Object.assign({type:"config_entries/get"},i))},s=(e,t)=>e.callWS({type:"config_entries/get_single",entry_id:t})},32293:function(e,t,i){i.d(t,{HD:function(){return o},ih:function(){return r},rf:function(){return s}});var a=i(97809);(0,a.q6)("connection"),(0,a.q6)("states"),(0,a.q6)("entities"),(0,a.q6)("devices"),(0,a.q6)("areas"),(0,a.q6)("localize"),(0,a.q6)("locale"),(0,a.q6)("config"),(0,a.q6)("themes"),(0,a.q6)("selectedTheme"),(0,a.q6)("user"),(0,a.q6)("userData"),(0,a.q6)("panels");const r=(0,a.q6)("extendedEntities"),s=(0,a.q6)("floors"),o=(0,a.q6)("labels")},14523:function(e,t,i){i.d(t,{HV:function(){return s},Hh:function(){return r},KF:function(){return n},ON:function(){return o},g0:function(){return c},s7:function(){return d}});var a=i(41106);const r="unavailable",s="unknown",o="on",n="off",d=[r,s],l=[r,s,n],c=(0,a.g)(d);(0,a.g)(l)},59569:function(e,t,i){i.d(t,{BM:function(){return b},Bz:function(){return y},G3:function(){return u},G_:function(){return v},Ox:function(){return g},P9:function(){return f},jh:function(){return h},v:function(){return p},wz:function(){return x}});i(79827),i(35748),i(35058),i(65315),i(837),i(84136),i(37089),i(12977),i(18223),i(95013);var a=i(47308),r=i(65940),s=i(88341),o=i(42647),n=i(72652),d=(i(24730),i(54e3)),l=i(51849),c=i(61964);const h=(e,t)=>{if(t.name)return t.name;const i=e.states[t.entity_id];return i?(0,n.u)(i):t.original_name?t.original_name:t.entity_id},p=(e,t)=>e.callWS({type:"config/entity_registry/get",entity_id:t}),u=(e,t)=>e.callWS({type:"config/entity_registry/get_entries",entity_ids:t}),v=(e,t,i)=>e.callWS(Object.assign({type:"config/entity_registry/update",entity_id:t},i)),_=e=>e.sendMessagePromise({type:"config/entity_registry/list"}),m=(e,t)=>e.subscribeEvents((0,l.s)(()=>_(e).then(e=>t.setState(e,!0)),500,!0),"entity_registry_updated"),y=(e,t)=>(0,a.N)("_entityRegistry",_,m,e,t),g=(0,r.A)(e=>{const t={};for(const i of e)t[i.entity_id]=i;return t}),f=(0,r.A)(e=>{const t={};for(const i of e)t[i.id]=i;return t}),b=(e,t)=>e.callWS({type:"config/entity_registry/get_automatic_entity_ids",entity_ids:t}),x=(e,t,i,a,r,l,h,p,u)=>{let v=[],_=Object.keys(e.states);return h&&(_=_.filter(e=>h.includes(e))),p&&(_=_.filter(e=>!p.includes(e))),t&&(_=_.filter(e=>t.includes((0,s.m)(e)))),i&&(_=_.filter(e=>!i.includes((0,s.m)(e)))),v=_.map(t=>{const i=e.states[t],a=(0,n.u)(i),[r,l,h]=(0,o.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),p=(0,c.p$)(e.localize,(0,s.m)(t)),u=(0,d.qC)(e),v=r||l||t,_=[h,r?l:void 0].filter(Boolean).join(u?" ◂ ":" ▸ "),m=[l,r].filter(Boolean).join(" - ");return{id:t,primary:v,secondary:_,domain_name:p,sorting_label:[l,r].filter(Boolean).join("_"),search_labels:[r,l,h,p,a,t].filter(Boolean),a11y_label:m,stateObj:i}}),r&&(v=v.filter(e=>{var t;return e.id===u||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.device_class)&&r.includes(e.stateObj.attributes.device_class)})),l&&(v=v.filter(e=>{var t;return e.id===u||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.unit_of_measurement)&&l.includes(e.stateObj.attributes.unit_of_measurement)})),a&&(v=v.filter(e=>e.id===u||e.stateObj&&a(e.stateObj))),v}},8549:function(e,t,i){i.d(t,{c:function(){return s}});i(35748),i(5934),i(95013);const a=async(e,t,i,r,s,...o)=>{const n=s,d=n[e],l=d=>r&&r(s,d.result)!==d.cacheKey?(n[e]=void 0,a(e,t,i,r,s,...o)):d.result;if(d)return d instanceof Promise?d.then(l):l(d);const c=i(s,...o);return n[e]=c,c.then(i=>{n[e]={result:i,cacheKey:null==r?void 0:r(s,i)},setTimeout(()=>{n[e]=void 0},t)},()=>{n[e]=void 0}),c},r=e=>e.callWS({type:"entity/source"}),s=e=>a("_entitySources",3e4,r,e=>Object.keys(e.states).length,e)},8148:function(e,t,i){i.d(t,{KD:function(){return r},_o:function(){return s},eq:function(){return o}});i(35748),i(99342),i(12977),i(95013);var a=i(24730);i(88178);const r=(e,t)=>e.callWS(Object.assign({type:"config/floor_registry/create"},t)),s=e=>{const t={};for(const i of e)i.floor_id&&(i.floor_id in t||(t[i.floor_id]=[]),t[i.floor_id].push(i));return t},o=(e,t)=>(i,r)=>{const s=t?t.indexOf(i):-1,o=t?t.indexOf(r):-1;if(-1===s&&-1===o){var n,d;const t=null==e?void 0:e[i],s=null==e?void 0:e[r];var l,c;if(t&&s&&t.level!==s.level)return(null!==(l=s.level)&&void 0!==l?l:-9999)-(null!==(c=t.level)&&void 0!==c?c:-9999);const o=null!==(n=null==t?void 0:t.name)&&void 0!==n?n:i,h=null!==(d=null==s?void 0:s.name)&&void 0!==d?d:r;return(0,a.xL)(o,h)}return-1===s?1:-1===o?-1:s-o}},40804:function(e,t,i){i.d(t,{IV:function(){return u},Rp:function(){return p},_9:function(){return h},o5:function(){return c}});i(32203),i(79827),i(35748),i(35058),i(65315),i(12840),i(837),i(22416),i(37089),i(59023),i(12977),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(18223),i(95013);var a=i(47308),r=i(88341),s=i(24730),o=i(51849),n=i(95968);const d=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then(e=>e.sort((e,t)=>(0,s.xL)(e.name,t.name))),l=(e,t)=>e.subscribeEvents((0,o.s)(()=>d(e).then(e=>t.setState(e,!0)),500,!0),"label_registry_updated"),c=(e,t)=>(0,a.N)("_labelRegistry",d,l,e,t),h=(e,t)=>e.callWS(Object.assign({type:"config/label_registry/create"},t)),p=(e,t,i)=>e.callWS(Object.assign({type:"config/label_registry/update",label_id:t},i)),u=(e,t,i,a,s,o,d,l)=>{if(!t||0===t.length)return[];const c=Object.values(e.devices),h=Object.values(e.entities);let p,u,v={};(i||a||s||o||d)&&(v=(0,n.g2)(h),p=c,u=h.filter(e=>e.labels.length>0),i&&(p=p.filter(e=>{const t=v[e.id];return!(!t||!t.length)&&v[e.id].some(e=>i.includes((0,r.m)(e.entity_id)))}),u=u.filter(e=>i.includes((0,r.m)(e.entity_id)))),a&&(p=p.filter(e=>{const t=v[e.id];return!t||!t.length||h.every(e=>!a.includes((0,r.m)(e.entity_id)))}),u=u.filter(e=>!a.includes((0,r.m)(e.entity_id)))),s&&(p=p.filter(t=>{const i=v[t.id];return!(!i||!i.length)&&v[t.id].some(t=>{const i=e.states[t.entity_id];return!!i&&(i.attributes.device_class&&s.includes(i.attributes.device_class))})}),u=u.filter(t=>{const i=e.states[t.entity_id];return i.attributes.device_class&&s.includes(i.attributes.device_class)})),o&&(p=p.filter(e=>o(e))),d&&(p=p.filter(t=>{const i=v[t.id];return!(!i||!i.length)&&v[t.id].some(t=>{const i=e.states[t.entity_id];return!!i&&d(i)})}),u=u.filter(t=>{const i=e.states[t.entity_id];return!!i&&d(i)})));let _=t;const m=new Set;let y;p&&(y=p.filter(e=>e.area_id).map(e=>e.area_id),p.forEach(e=>{e.labels.forEach(e=>m.add(e))})),u&&(y=(null!=y?y:[]).concat(u.filter(e=>e.area_id).map(e=>e.area_id)),u.forEach(e=>{e.labels.forEach(e=>m.add(e))})),y&&y.forEach(t=>{e.areas[t].labels.forEach(e=>m.add(e))}),l&&(_=_.filter(e=>!l.includes(e.label_id))),(p||u)&&(_=_.filter(e=>m.has(e.label_id)));return _.map(e=>{var t;return{id:e.label_id,primary:e.name,secondary:null!==(t=e.description)&&void 0!==t?t:"",icon:e.icon||void 0,icon_path:e.icon?void 0:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",sorting_label:e.name,search_labels:[e.name,e.label_id,e.description].filter(e=>Boolean(e))}})}},18289:function(e,t,i){i.d(t,{F7:function(){return r},Kx:function(){return s},Ly:function(){return o},YK:function(){return n}});i(79827),i(65315),i(837),i(59023),i(5934),i(18223);var a=i(88341);const r=async(e,t)=>e.callWS({type:"extract_from_target",target:t}),s=(e,t,i,a,r,s,d,l)=>{if(Object.values(t).filter(t=>t.area_id===e.area_id).some(e=>o(e,i,a,r,s,d,l)))return!0;return!!Object.values(i).filter(t=>t.area_id===e.area_id).some(e=>n(e,!1,r,s,d,l))},o=(e,t,i,a,r,s,o)=>!!Object.values(t).filter(t=>t.device_id===e.id).some(e=>n(e,!1,a,r,s,o))&&(!i||i(e)),n=(e,t=!1,i,r,s,o)=>{if(e.hidden||e.entity_category&&!t)return!1;if(i&&!i.includes((0,a.m)(e.entity_id)))return!1;if(r){const t=null==s?void 0:s[e.entity_id];if(!t)return!1;if(!t.attributes.device_class||!r.includes(t.attributes.device_class))return!1}if(o){const t=null==s?void 0:s[e.entity_id];return!!t&&o(t)}return!0}},88178:function(e,t,i){i(51849)},40328:function(e,t,i){i.d(t,{E:function(){return s}});i(79827),i(35748),i(65315),i(59023),i(5934),i(18223),i(95013);var a=i(69868),r=i(11991);const s=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then(e=>e()):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(e=>void 0===this[e])||(this.__unsubs=this.hassSubscribe())}}return(0,a.__decorate)([(0,r.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},5001:function(e,t,i){i.d(t,{$:function(){return s}});i(35748),i(5934),i(95013);var a=i(44017);const r=()=>Promise.all([i.e("3245"),i.e("6468")]).then(i.bind(i,27727)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:r,dialogParams:t})}},8330:function(e,t,i){i.d(t,{b:function(){return s}});i(35748),i(65315),i(837),i(37089),i(12977),i(67579),i(79566),i(95013);var a=i(88970);const r={ignoreDiacritics:!0,isCaseSensitive:!1,threshold:.3,minMatchCharLength:2};class s extends a.A{multiTermsSearch(e,t){const i=e.toLowerCase().split(" "),{minMatchCharLength:a}=this.options,r=a?i.filter(e=>e.length>=a):i;if(0===r.length)return null;const s=this.getIndex().toJSON().keys,o={$and:r.map(e=>({$or:s.map(t=>({$path:t.path,$val:e}))}))};return this.search(o,t)}constructor(e,t,i){super(e,Object.assign(Object.assign({},r),t),i)}}},78100:function(e,t,i){i.d(t,{i:function(){return a}});i(35748),i(5934),i(95013);const a=async()=>{await i.e("3767").then(i.bind(i,29338))}},71522:function(e,t,i){i.d(t,{MR:function(){return a},a_:function(){return r},bg:function(){return s}});i(56660);const a=e=>`https://brands.home-assistant.io/${e.brand?"brands/":""}${e.useFallback?"_/":""}${e.domain}/${e.darkOptimized?"dark_":""}${e.type}.png`,r=e=>e.split("/")[4],s=e=>e.startsWith("https://brands.home-assistant.io/")}}]);
//# sourceMappingURL=7585.961fcff098ed14b0.js.map