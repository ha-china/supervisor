"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["7148"],{37240:function(t,e,i){i.d(e,{aH:function(){return r}});var n=i(191),s=i(72652);i(35748),i(56660),i(95013);const o=[" ",": "," - "],a=t=>t.toLowerCase()!==t,r=(t,e,i)=>{const n=e[t.entity_id];return n?d(n,i):(0,s.u)(t)},d=(t,e,i)=>{const r=t.name||("original_name"in t&&null!=t.original_name?String(t.original_name):void 0),d=t.device_id?e[t.device_id]:void 0;if(!d)return r||(i?(0,s.u)(i):void 0);const c=(0,n.xn)(d);return c!==r?c&&r&&((t,e)=>{const i=t.toLowerCase(),n=e.toLowerCase();for(const s of o){const e=`${n}${s}`;if(i.startsWith(e)){const i=t.substring(e.length);if(i.length)return a(i.substr(0,i.indexOf(" ")))?i:i[0].toUpperCase()+i.slice(1)}}})(r,c)||r:void 0}},42647:function(t,e,i){i.d(e,{Cf:function(){return d}});i(65315),i(12840),i(837),i(37089),i(59023);var n=i(77832),s=i(191),o=i(37240),a=i(52777),r=i(73941);const d=(t,e,i,d,c,l)=>{const{device:u,area:p,floor:h}=(0,r.l)(t,i,d,c,l);return e.map(e=>{switch(e.type){case"entity":return(0,o.aH)(t,i,d);case"device":return u?(0,s.xn)(u):void 0;case"area":return p?(0,n.A)(p):void 0;case"floor":return h?(0,a.X)(h):void 0;case"text":return e.text;default:return""}})}},73941:function(t,e,i){i.d(e,{l:function(){return n}});const n=(t,e,i,n,o)=>{const a=e[t.entity_id];return a?s(a,e,i,n,o):{entity:null,device:null,area:null,floor:null}},s=(t,e,i,n,s)=>{const o=e[t.entity_id],a=null==t?void 0:t.device_id,r=a?i[a]:void 0,d=(null==t?void 0:t.area_id)||(null==r?void 0:r.area_id),c=d?n[d]:void 0,l=null==c?void 0:c.floor_id;return{entity:o,device:r||null,area:c||null,floor:(l?s[l]:void 0)||null}}},22527:function(t,e,i){i.d(e,{n:function(){return s}});i(67579),i(41190);const n=/^(\w+)\.(\w+)$/,s=t=>n.test(t)},39988:function(t,e,i){i.a(t,async function(t,e){try{i(35748),i(86149),i(65315),i(37089),i(5934),i(56660),i(95013);var n=i(69868),s=i(84922),o=i(11991),a=i(65940),r=i(44017),d=i(42647),c=i(22527),l=i(54e3),u=i(59569),p=i(61964),h=i(47225),y=i(5001),_=(i(99322),i(64578)),v=(i(86160),i(6595)),f=t([_,v]);[_,v]=f.then?(await f)():f;let g,m,b,$,w,M,C,j,O,x=t=>t;const Z="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",I="M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",k="___create-new-entity___";class B extends s.WF{firstUpdated(t){super.firstUpdated(t),this.hass.loadBackendTranslation("title")}get _showEntityId(){var t;return this.showEntityId||(null===(t=this.hass.userData)||void 0===t?void 0:t.showEntityIdPicker)}render(){var t;const e=null!==(t=this.placeholder)&&void 0!==t?t:this.hass.localize("ui.components.entity.entity-picker.placeholder"),i=this.hass.localize("ui.components.entity.entity-picker.no_match");return(0,s.qy)(g||(g=x` <ha-generic-picker .hass="${0}" .disabled="${0}" .autofocus="${0}" .allowCustomValue="${0}" .label="${0}" .helper="${0}" .searchLabel="${0}" .notFoundLabel="${0}" .placeholder="${0}" .value="${0}" .rowRenderer="${0}" .getItems="${0}" .getAdditionalItems="${0}" .hideClearIcon="${0}" .searchFn="${0}" .valueRenderer="${0}" @value-changed="${0}" .addButtonLabel="${0}"> </ha-generic-picker> `),this.hass,this.disabled,this.autofocus,this.allowCustomEntity,this.label,this.helper,this.searchLabel,i,e,this.addButton?void 0:this.value,this._rowRenderer,this._getItems,this._getAdditionalItems,this.hideClearIcon,this._searchFn,this._valueRenderer,this._valueChanged,this.addButton?this.hass.localize("ui.components.entity.entity-picker.add"):void 0)}async open(){var t;await this.updateComplete,await(null===(t=this._picker)||void 0===t?void 0:t.open())}_valueChanged(t){t.stopPropagation();const e=t.detail.value;if(e){if(e.startsWith(k)){const t=e.substring(k.length);return void(0,y.$)(this,{domain:t,dialogClosedCallback:t=>{t.entityId&&this._setValue(t.entityId)}})}(0,c.n)(e)&&this._setValue(e)}else this._setValue(void 0)}_setValue(t){this.value=t,(0,r.r)(this,"value-changed",{value:t}),(0,r.r)(this,"change")}constructor(...t){super(...t),this.autofocus=!1,this.disabled=!1,this.required=!1,this.showEntityId=!1,this.hideClearIcon=!1,this.addButton=!1,this._valueRenderer=t=>{const e=t||"",i=this.hass.states[e];if(!i)return(0,s.qy)(m||(m=x` <ha-svg-icon slot="start" .path="${0}" style="margin:0 4px"></ha-svg-icon> <span slot="headline">${0}</span> `),I,e);const[n,o,a]=(0,d.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors),r=(0,l.qC)(this.hass),c=n||o||e,u=[a,n?o:void 0].filter(Boolean).join(r?" ◂ ":" ▸ ");return(0,s.qy)(b||(b=x` <state-badge .hass="${0}" .stateObj="${0}" slot="start"></state-badge> <span slot="headline">${0}</span> <span slot="supporting-text">${0}</span> `),this.hass,i,c,u)},this._rowRenderer=(t,{index:e})=>{const i=this._showEntityId;return(0,s.qy)($||($=x` <ha-combo-box-item type="button" compact="compact" .borderTop="${0}"> ${0} <span slot="headline">${0}</span> ${0} ${0} ${0} </ha-combo-box-item> `),0!==e,t.icon_path?(0,s.qy)(w||(w=x` <ha-svg-icon slot="start" style="margin:0 4px" .path="${0}"></ha-svg-icon> `),t.icon_path):(0,s.qy)(M||(M=x` <state-badge slot="start" .stateObj="${0}" .hass="${0}"></state-badge> `),t.stateObj,this.hass),t.primary,t.secondary?(0,s.qy)(C||(C=x`<span slot="supporting-text">${0}</span>`),t.secondary):s.s6,t.stateObj&&i?(0,s.qy)(j||(j=x` <span slot="supporting-text" class="code"> ${0} </span> `),t.stateObj.entity_id):s.s6,t.domain_name&&!i?(0,s.qy)(O||(O=x` <div slot="trailing-supporting-text" class="domain"> ${0} </div> `),t.domain_name):s.s6)},this._getAdditionalItems=()=>this._getCreateItems(this.hass.localize,this.createDomains),this._getCreateItems=(0,a.A)((t,e)=>null!=e&&e.length?e.map(e=>{const i=t("ui.components.entity.entity-picker.create_helper",{domain:(0,h.z)(e)?t(`ui.panel.config.helpers.types.${e}`):(0,p.p$)(t,e)});return{id:k+e,primary:i,secondary:t("ui.components.entity.entity-picker.new_entity"),icon_path:Z}}):[]),this._getEntitiesMemoized=(0,a.A)(u.wz),this._getItems=()=>this._getEntitiesMemoized(this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.value),this._searchFn=(t,e)=>{const i=e.findIndex(e=>{var i;return(null===(i=e.stateObj)||void 0===i?void 0:i.entity_id)===t});if(-1===i)return e;const[n]=e.splice(i,1);return e.unshift(n),e}}}(0,n.__decorate)([(0,o.MZ)({attribute:!1})],B.prototype,"hass",void 0),(0,n.__decorate)([(0,o.MZ)({type:Boolean})],B.prototype,"autofocus",void 0),(0,n.__decorate)([(0,o.MZ)({type:Boolean})],B.prototype,"disabled",void 0),(0,n.__decorate)([(0,o.MZ)({type:Boolean})],B.prototype,"required",void 0),(0,n.__decorate)([(0,o.MZ)({type:Boolean,attribute:"allow-custom-entity"})],B.prototype,"allowCustomEntity",void 0),(0,n.__decorate)([(0,o.MZ)({type:Boolean,attribute:"show-entity-id"})],B.prototype,"showEntityId",void 0),(0,n.__decorate)([(0,o.MZ)()],B.prototype,"label",void 0),(0,n.__decorate)([(0,o.MZ)()],B.prototype,"value",void 0),(0,n.__decorate)([(0,o.MZ)()],B.prototype,"helper",void 0),(0,n.__decorate)([(0,o.MZ)()],B.prototype,"placeholder",void 0),(0,n.__decorate)([(0,o.MZ)({type:String,attribute:"search-label"})],B.prototype,"searchLabel",void 0),(0,n.__decorate)([(0,o.MZ)({attribute:!1,type:Array})],B.prototype,"createDomains",void 0),(0,n.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],B.prototype,"includeDomains",void 0),(0,n.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],B.prototype,"excludeDomains",void 0),(0,n.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],B.prototype,"includeDeviceClasses",void 0),(0,n.__decorate)([(0,o.MZ)({type:Array,attribute:"include-unit-of-measurement"})],B.prototype,"includeUnitOfMeasurement",void 0),(0,n.__decorate)([(0,o.MZ)({type:Array,attribute:"include-entities"})],B.prototype,"includeEntities",void 0),(0,n.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-entities"})],B.prototype,"excludeEntities",void 0),(0,n.__decorate)([(0,o.MZ)({attribute:!1})],B.prototype,"entityFilter",void 0),(0,n.__decorate)([(0,o.MZ)({attribute:"hide-clear-icon",type:Boolean})],B.prototype,"hideClearIcon",void 0),(0,n.__decorate)([(0,o.MZ)({attribute:"add-button",type:Boolean})],B.prototype,"addButton",void 0),(0,n.__decorate)([(0,o.P)("ha-generic-picker")],B.prototype,"_picker",void 0),B=(0,n.__decorate)([(0,o.EM)("ha-entity-picker")],B),e()}catch(g){e(g)}})},72094:function(t,e,i){i.d(e,{Hg:function(){return n},e0:function(){return s}});i(79827),i(65315),i(37089),i(36874),i(12977),i(5934),i(90917),i(18223);const n=t=>t.map(t=>{if("string"!==t.type)return t;switch(t.name){case"username":return Object.assign(Object.assign({},t),{},{autocomplete:"username",autofocus:!0});case"password":return Object.assign(Object.assign({},t),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},t),{},{autocomplete:"one-time-code",autofocus:!0});default:return t}}),s=(t,e)=>t.callWS({type:"auth/sign_path",path:e})},14523:function(t,e,i){i.d(e,{HV:function(){return o},Hh:function(){return s},KF:function(){return r},ON:function(){return a},g0:function(){return l},s7:function(){return d}});var n=i(41106);const s="unavailable",o="unknown",a="on",r="off",d=[s,o],c=[s,o,r],l=(0,n.g)(d);(0,n.g)(c)},59569:function(t,e,i){i.d(e,{BM:function(){return b},Bz:function(){return f},G3:function(){return h},G_:function(){return y},Ox:function(){return g},P9:function(){return m},jh:function(){return u},v:function(){return p},wz:function(){return $}});i(79827),i(35748),i(35058),i(65315),i(837),i(84136),i(37089),i(12977),i(18223),i(95013);var n=i(47308),s=i(65940),o=i(88341),a=i(42647),r=i(72652),d=(i(24730),i(54e3)),c=i(51849),l=i(61964);const u=(t,e)=>{if(e.name)return e.name;const i=t.states[e.entity_id];return i?(0,r.u)(i):e.original_name?e.original_name:e.entity_id},p=(t,e)=>t.callWS({type:"config/entity_registry/get",entity_id:e}),h=(t,e)=>t.callWS({type:"config/entity_registry/get_entries",entity_ids:e}),y=(t,e,i)=>t.callWS(Object.assign({type:"config/entity_registry/update",entity_id:e},i)),_=t=>t.sendMessagePromise({type:"config/entity_registry/list"}),v=(t,e)=>t.subscribeEvents((0,c.s)(()=>_(t).then(t=>e.setState(t,!0)),500,!0),"entity_registry_updated"),f=(t,e)=>(0,n.N)("_entityRegistry",_,v,t,e),g=(0,s.A)(t=>{const e={};for(const i of t)e[i.entity_id]=i;return e}),m=(0,s.A)(t=>{const e={};for(const i of t)e[i.id]=i;return e}),b=(t,e)=>t.callWS({type:"config/entity_registry/get_automatic_entity_ids",entity_ids:e}),$=(t,e,i,n,s,c,u,p,h)=>{let y=[],_=Object.keys(t.states);return u&&(_=_.filter(t=>u.includes(t))),p&&(_=_.filter(t=>!p.includes(t))),e&&(_=_.filter(t=>e.includes((0,o.m)(t)))),i&&(_=_.filter(t=>!i.includes((0,o.m)(t)))),y=_.map(e=>{const i=t.states[e],n=(0,r.u)(i),[s,c,u]=(0,a.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],t.entities,t.devices,t.areas,t.floors),p=(0,l.p$)(t.localize,(0,o.m)(e)),h=(0,d.qC)(t),y=s||c||e,_=[u,s?c:void 0].filter(Boolean).join(h?" ◂ ":" ▸ "),v=[c,s].filter(Boolean).join(" - ");return{id:e,primary:y,secondary:_,domain_name:p,sorting_label:[c,s].filter(Boolean).join("_"),search_labels:[s,c,u,p,n,e].filter(Boolean),a11y_label:v,stateObj:i}}),s&&(y=y.filter(t=>{var e;return t.id===h||(null===(e=t.stateObj)||void 0===e?void 0:e.attributes.device_class)&&s.includes(t.stateObj.attributes.device_class)})),c&&(y=y.filter(t=>{var e;return t.id===h||(null===(e=t.stateObj)||void 0===e?void 0:e.attributes.unit_of_measurement)&&c.includes(t.stateObj.attributes.unit_of_measurement)})),n&&(y=y.filter(t=>t.id===h||t.stateObj&&n(t.stateObj))),y}},5001:function(t,e,i){i.d(e,{$:function(){return o}});i(35748),i(5934),i(95013);var n=i(44017);const s=()=>Promise.all([i.e("3245"),i.e("6468")]).then(i.bind(i,27727)),o=(t,e)=>{(0,n.r)(t,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:s,dialogParams:e})}}}]);
//# sourceMappingURL=7148.461ac229103716f8.js.map