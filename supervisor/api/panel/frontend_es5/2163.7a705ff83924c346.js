"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["2163"],{86420:function(e,a,t){t.d(a,{D:function(){return i}});t(20655);var i=function(e){var a;return null===(a=e.name)||void 0===a?void 0:a.trim()}},3760:function(e,a,t){t.d(a,{C:function(){return i}});var i=function(e,a){var t=e.floor_id;return{area:e,floor:(t?a.floors[t]:void 0)||null}}},81605:function(e,a,t){t.a(e,async function(e,a){try{var i,r,s,o,n,l,d=t(29694),c=t(75778),u=t(22225),h=t(54982),_=t(54521),v=t(4490),p=t(20129),f=t(85297),m=(t(12212),t(25518),t(39710),t(24819),t(81738),t(33480),t(94814),t(6989),t(72489),t(54480),t(69920),t(56389),t(44261),t(73742)),y=t(59048),g=t(7616),b=t(28105),A=t(39884),k=t(86420),C=t(44272),Z=t(43130),w=t(3760),V=t(85993),L=t(28905),z=t(72242),x=t(2609),B=(t(12692),t(64879)),H=(t(81777),t(993),e([B]));B=(H.then?(await H)():H)[0];var D="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",M="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",S="___ADD_NEW___",E=function(e){function a(){var e;(0,_.Z)(this,a);for(var t=arguments.length,l=new Array(t),d=0;d<t;d++)l[d]=arguments[d];return(e=(0,p.Z)(this,a,[].concat(l))).noAdd=!1,e.disabled=!1,e.required=!1,e._computeValueRenderer=(0,b.Z)(function(a){return function(a){var t=e.hass.areas[a];if(!t)return(0,y.dy)(i||(i=(0,h.Z)([' <ha-svg-icon slot="start" .path="','"></ha-svg-icon> <span slot="headline">',"</span> "])),M,t);var l=(0,w.C)(t,e.hass).floor,d=t?(0,k.D)(t):void 0,c=l?(0,Z.r)(l):void 0,u=t.icon;return(0,y.dy)(r||(r=(0,h.Z)([" ",' <span slot="headline">',"</span> "," "])),u?(0,y.dy)(s||(s=(0,h.Z)(['<ha-icon slot="start" .icon="','"></ha-icon>'])),u):(0,y.dy)(o||(o=(0,h.Z)(['<ha-svg-icon slot="start" .path="','"></ha-svg-icon>'])),M),d,c?(0,y.dy)(n||(n=(0,h.Z)(['<span slot="supporting-text">',"</span>"])),c):y.Ld)}}),e._getAreas=(0,b.Z)(function(a,t,i,r,s,o,n,l,d){var c,h,_={},v=Object.values(a),p=Object.values(t),f=Object.values(i);(r||s||o||n||l)&&(_=(0,L.R6)(f),c=p,h=f.filter(function(e){return e.area_id}),r&&(c=c.filter(function(e){var a=_[e.id];return!(!a||!a.length)&&_[e.id].some(function(e){return r.includes((0,C.M)(e.entity_id))})}),h=h.filter(function(e){return r.includes((0,C.M)(e.entity_id))})),s&&(c=c.filter(function(e){var a=_[e.id];return!a||!a.length||f.every(function(e){return!s.includes((0,C.M)(e.entity_id))})}),h=h.filter(function(e){return!s.includes((0,C.M)(e.entity_id))})),o&&(c=c.filter(function(a){var t=_[a.id];return!(!t||!t.length)&&_[a.id].some(function(a){var t=e.hass.states[a.entity_id];return!!t&&(t.attributes.device_class&&o.includes(t.attributes.device_class))})}),h=h.filter(function(a){var t=e.hass.states[a.entity_id];return t.attributes.device_class&&o.includes(t.attributes.device_class)})),n&&(c=c.filter(function(e){return n(e)})),l&&(c=c.filter(function(a){var t=_[a.id];return!(!t||!t.length)&&_[a.id].some(function(a){var t=e.hass.states[a.entity_id];return!!t&&l(t)})}),h=h.filter(function(a){var t=e.hass.states[a.entity_id];return!!t&&l(t)})));var m,y=v;return c&&(m=c.filter(function(e){return e.area_id}).map(function(e){return e.area_id})),h&&(m=(null!=m?m:[]).concat(h.filter(function(e){return e.area_id}).map(function(e){return e.area_id}))),m&&(y=y.filter(function(e){return m.includes(e.area_id)})),d&&(y=y.filter(function(e){return!d.includes(e.area_id)})),y.map(function(a){var t=(0,w.C)(a,e.hass).floor,i=t?(0,Z.r)(t):void 0,r=(0,k.D)(a);return{id:a.area_id,primary:r||a.area_id,secondary:i,icon:a.icon||void 0,icon_path:a.icon?void 0:M,sorting_label:r,search_labels:[r,i,a.area_id].concat((0,u.Z)(a.aliases)).filter(function(e){return Boolean(e)})}})}),e._getItems=function(){return e._getAreas(e.hass.areas,e.hass.devices,e.hass.entities,e.includeDomains,e.excludeDomains,e.includeDeviceClasses,e.deviceFilter,e.entityFilter,e.excludeAreas)},e._allAreaNames=(0,b.Z)(function(e){return Object.values(e).map(function(e){var a;return null===(a=(0,k.D)(e))||void 0===a?void 0:a.toLowerCase()}).filter(Boolean)}),e._getAdditionalItems=function(a){if(e.noAdd)return[];var t=e._allAreaNames(e.hass.areas);return a&&!t.includes(a.toLowerCase())?[{id:S+a,primary:e.hass.localize("ui.components.area-picker.add_new_sugestion",{name:a}),icon_path:D}]:[{id:S,primary:e.hass.localize("ui.components.area-picker.add_new"),icon_path:D}]},e}return(0,f.Z)(a,e),(0,v.Z)(a,[{key:"open",value:(t=(0,c.Z)((0,d.Z)().m(function e(){var a;return(0,d.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.updateComplete;case 1:return e.n=2,null===(a=this._picker)||void 0===a?void 0:a.open();case 2:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,a=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.area-picker.area"),t=this._computeValueRenderer(this.hass.areas);return(0,y.dy)(l||(l=(0,h.Z)([' <ha-generic-picker .hass="','" .autofocus="','" .label="','" .helper="','" .notFoundLabel="','" .placeholder="','" .value="','" .getItems="','" .getAdditionalItems="','" .valueRenderer="','" @value-changed="','"> </ha-generic-picker> '])),this.hass,this.autofocus,this.label,this.helper,this.hass.localize("ui.components.area-picker.no_match"),a,this.value,this._getItems,this._getAdditionalItems,t,this._valueChanged)}},{key:"_valueChanged",value:function(e){var a=this;e.stopPropagation();var t=e.detail.value;if(t){if(t.startsWith(S)){this.hass.loadFragmentTranslation("config");var i=t.substring(13);(0,x.E)(this,{suggestedName:i,createEntry:(r=(0,c.Z)((0,d.Z)().m(function e(t){var i,r;return(0,d.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,V.Lo)(a.hass,t);case 1:i=e.v,a._setValue(i.area_id),e.n=3;break;case 2:e.p=2,r=e.v,(0,z.Ys)(a,{title:a.hass.localize("ui.components.area-picker.failed_create_area"),text:r.message});case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return r.apply(this,arguments)})})}var r;this._setValue(t)}else this._setValue(void 0)}},{key:"_setValue",value:function(e){this.value=e,(0,A.B)(this,"value-changed",{value:e}),(0,A.B)(this,"change")}}]);var t}(y.oi);(0,m.__decorate)([(0,g.Cb)({attribute:!1})],E.prototype,"hass",void 0),(0,m.__decorate)([(0,g.Cb)()],E.prototype,"label",void 0),(0,m.__decorate)([(0,g.Cb)()],E.prototype,"value",void 0),(0,m.__decorate)([(0,g.Cb)()],E.prototype,"helper",void 0),(0,m.__decorate)([(0,g.Cb)()],E.prototype,"placeholder",void 0),(0,m.__decorate)([(0,g.Cb)({type:Boolean,attribute:"no-add"})],E.prototype,"noAdd",void 0),(0,m.__decorate)([(0,g.Cb)({type:Array,attribute:"include-domains"})],E.prototype,"includeDomains",void 0),(0,m.__decorate)([(0,g.Cb)({type:Array,attribute:"exclude-domains"})],E.prototype,"excludeDomains",void 0),(0,m.__decorate)([(0,g.Cb)({type:Array,attribute:"include-device-classes"})],E.prototype,"includeDeviceClasses",void 0),(0,m.__decorate)([(0,g.Cb)({type:Array,attribute:"exclude-areas"})],E.prototype,"excludeAreas",void 0),(0,m.__decorate)([(0,g.Cb)({attribute:!1})],E.prototype,"deviceFilter",void 0),(0,m.__decorate)([(0,g.Cb)({attribute:!1})],E.prototype,"entityFilter",void 0),(0,m.__decorate)([(0,g.Cb)({type:Boolean})],E.prototype,"disabled",void 0),(0,m.__decorate)([(0,g.Cb)({type:Boolean})],E.prototype,"required",void 0),(0,m.__decorate)([(0,g.IO)("ha-generic-picker")],E.prototype,"_picker",void 0),E=(0,m.__decorate)([(0,g.Mo)("ha-area-picker")],E),a()}catch(I){a(I)}})},3343:function(e,a,t){t.a(e,async function(e,i){try{t.r(a);var r,s,o,n,l,d,c,u,h,_=t(29694),v=t(75778),p=t(54982),f=t(54521),m=t(4490),y=t(20129),g=t(85297),b=(t(12212),t(25518),t(26847),t(24819),t(81738),t(94814),t(6989),t(96821),t(54480),t(69920),t(11353),t(67886),t(65451),t(46015),t(38334),t(94880),t(75643),t(29761),t(48694),t(20655),t(27530),t(73742)),A=(t(98334),t(59048)),k=t(7616),C=t(88245),Z=t(28105),w=t(39884),V=(t(67801),t(96005),t(12942),t(79160),t(83378)),L=t(28541),z=(t(55245),t(993),t(37492),t(81605)),x=t(95814),B=t(2609),H=t(85993),D=e([L,z]);[L,z]=D.then?(await D)():D;var M=function(e){function a(){var e;(0,f.Z)(this,a);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(e=(0,y.Z)(this,a,[].concat(i)))._addedAreas=new Set,e._removedAreas=new Set,e._floorAreas=(0,Z.Z)(function(e,a,t,i){return Object.values(a).filter(function(a){return(a.floor_id===(null==e?void 0:e.floor_id)||t.has(a.area_id))&&!i.has(a.area_id)})}),e}return(0,g.Z)(a,e),(0,m.Z)(a,[{key:"showDialog",value:function(e){var a,t,i,r;this._params=e,this._error=void 0,this._name=this._params.entry?this._params.entry.name:this._params.suggestedName||"",this._aliases=(null===(a=this._params.entry)||void 0===a?void 0:a.aliases)||[],this._icon=(null===(t=this._params.entry)||void 0===t?void 0:t.icon)||null,this._level=null!==(i=null===(r=this._params.entry)||void 0===r?void 0:r.level)&&void 0!==i?i:null,this._addedAreas.clear(),this._removedAreas.clear()}},{key:"closeDialog",value:function(){this._error="",this._params=void 0,this._addedAreas.clear(),this._removedAreas.clear(),(0,w.B)(this,"dialog-closed",{dialog:this.localName})}},{key:"render",value:function(){var e,a=this,t=this._floorAreas(null===(e=this._params)||void 0===e?void 0:e.entry,this.hass.areas,this._addedAreas,this._removedAreas);if(!this._params)return A.Ld;var i=this._params.entry,h=!this._isNameValid();return(0,A.dy)(r||(r=(0,p.Z)([' <ha-dialog open @closed="','" .heading="','"> <div> ',' <div class="form"> ',' <ha-textfield .value="','" @input="','" .label="','" .validationMessage="','" required dialogInitialFocus></ha-textfield> <ha-textfield .value="','" @input="','" .label="','" type="number"></ha-textfield> <ha-icon-picker .hass="','" .value="','" @value-changed="','" .label="','"> ',' </ha-icon-picker> <h3 class="header"> ',' </h3> <p class="description"> '," </p> ",' <ha-area-picker no-add .hass="','" @value-changed="','" .excludeAreas="','" .label="','"></ha-area-picker> <h3 class="header"> ',' </h3> <p class="description"> ',' </p> <ha-aliases-editor .hass="','" .aliases="','" @value-changed="','"></ha-aliases-editor> </div> </div> <mwc-button slot="secondaryAction" @click="','"> ',' </mwc-button> <mwc-button slot="primaryAction" @click="','" .disabled="','"> '," </mwc-button> </ha-dialog> "])),this.closeDialog,(0,V.i)(this.hass,i?this.hass.localize("ui.panel.config.floors.editor.update_floor"):this.hass.localize("ui.panel.config.floors.editor.create_floor")),this._error?(0,A.dy)(s||(s=(0,p.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",i?(0,A.dy)(o||(o=(0,p.Z)([' <ha-settings-row> <span slot="heading"> ',' </span> <span slot="description">',"</span> </ha-settings-row> "])),this.hass.localize("ui.panel.config.floors.editor.floor_id"),i.floor_id):A.Ld,this._name,this._nameChanged,this.hass.localize("ui.panel.config.floors.editor.name"),this.hass.localize("ui.panel.config.floors.editor.name_required"),this._level,this._levelChanged,this.hass.localize("ui.panel.config.floors.editor.level"),this.hass,this._icon,this._iconChanged,this.hass.localize("ui.panel.config.areas.editor.icon"),this._icon?A.Ld:(0,A.dy)(n||(n=(0,p.Z)([' <ha-floor-icon slot="fallback" .floor="','"></ha-floor-icon> '])),{level:this._level}),this.hass.localize("ui.panel.config.floors.editor.areas_section"),this.hass.localize("ui.panel.config.floors.editor.areas_description"),t.length?(0,A.dy)(l||(l=(0,p.Z)(["<ha-chip-set> "," </ha-chip-set>"])),(0,C.r)(t,function(e){return e.area_id},function(e){return(0,A.dy)(d||(d=(0,p.Z)(['<ha-input-chip .area="','" @click="','" @remove="','" .label="','"> '," </ha-input-chip>"])),e,a._openArea,a._removeArea,null==e?void 0:e.name,e.icon?(0,A.dy)(c||(c=(0,p.Z)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),e.icon):(0,A.dy)(u||(u=(0,p.Z)(['<ha-svg-icon slot="icon" .path="','"></ha-svg-icon>'])),"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"))})):A.Ld,this.hass,this._addArea,t.map(function(e){return e.area_id}),this.hass.localize("ui.panel.config.floors.editor.add_area"),this.hass.localize("ui.panel.config.floors.editor.aliases_section"),this.hass.localize("ui.panel.config.floors.editor.aliases_description"),this.hass,this._aliases,this._aliasesChanged,this.closeDialog,this.hass.localize("ui.common.cancel"),this._updateEntry,h||this._submitting,i?this.hass.localize("ui.common.save"):this.hass.localize("ui.common.create"))}},{key:"_openArea",value:function(e){var a=this,t=e.target.area;(0,B.E)(this,{entry:t,updateEntry:function(e){return(0,H.IO)(a.hass,t.area_id,e)}})}},{key:"_removeArea",value:function(e){var a=e.target.area.area_id;if(this._addedAreas.has(a))return this._addedAreas.delete(a),void(this._addedAreas=new Set(this._addedAreas));this._removedAreas.add(a),this._removedAreas=new Set(this._removedAreas)}},{key:"_addArea",value:function(e){var a=e.detail.value;if(a){if(e.target.value="",this._removedAreas.has(a))return this._removedAreas.delete(a),void(this._removedAreas=new Set(this._removedAreas));this._addedAreas.add(a),this._addedAreas=new Set(this._addedAreas)}}},{key:"_isNameValid",value:function(){return""!==this._name.trim()}},{key:"_nameChanged",value:function(e){this._error=void 0,this._name=e.target.value}},{key:"_levelChanged",value:function(e){this._error=void 0,this._level=""===e.target.value?null:Number(e.target.value)}},{key:"_iconChanged",value:function(e){this._error=void 0,this._icon=e.detail.value}},{key:"_updateEntry",value:(t=(0,v.Z)((0,_.Z)().m(function e(){var a,t,i;return(0,_.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._submitting=!0,a=!this._params.entry,e.p=1,t={name:this._name.trim(),icon:this._icon||(a?void 0:null),level:this._level,aliases:this._aliases},!a){e.n=3;break}return e.n=2,this._params.createEntry(t,this._addedAreas);case 2:e.n=4;break;case 3:return e.n=4,this._params.updateEntry(t,this._addedAreas,this._removedAreas);case 4:this.closeDialog(),e.n=6;break;case 5:e.p=5,i=e.v,this._error=i.message||this.hass.localize("ui.panel.config.floors.editor.unknown_error");case 6:return e.p=6,this._submitting=!1,e.f(6);case 7:return e.a(2)}},e,this,[[1,5,6,7]])})),function(){return t.apply(this,arguments)})},{key:"_aliasesChanged",value:function(e){this._aliases=e.detail.value}}],[{key:"styles",get:function(){return[x.Qx,x.yu,(0,A.iv)(h||(h=(0,p.Z)(["ha-textfield{display:block;margin-bottom:16px}ha-floor-icon{color:var(--secondary-text-color)}ha-chip-set{margin-bottom:8px}"])))]}}]);var t}(A.oi);(0,b.__decorate)([(0,k.Cb)({attribute:!1})],M.prototype,"hass",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_name",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_aliases",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_icon",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_level",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_error",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_params",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_submitting",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_addedAreas",void 0),(0,b.__decorate)([(0,k.SB)()],M.prototype,"_removedAreas",void 0),customElements.define("dialog-floor-registry-detail",M),i()}catch(S){i(S)}})},2609:function(e,a,t){t.d(a,{E:function(){return s}});t(26847),t(54480),t(1455),t(48694),t(27530);var i=t(39884),r=function(){return Promise.all([t.e("5696"),t.e("4779"),t.e("8612"),t.e("3401"),t.e("8349"),t.e("9432"),t.e("6910"),t.e("38"),t.e("2281"),t.e("2782"),t.e("3131"),t.e("1557"),t.e("9465")]).then(t.bind(t,14065))},s=function(e,a){(0,i.B)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:r,dialogParams:a})}}}]);
//# sourceMappingURL=2163.7a705ff83924c346.js.map