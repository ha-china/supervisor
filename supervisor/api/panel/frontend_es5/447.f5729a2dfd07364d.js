"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["447"],{78412:function(e,t,i){i.d(t,{M:function(){return s},l:function(){return a}});i(35748),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(95013);const a=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function s(e){return a.has(e)?`var(--${e}-color)`:e}},75831:function(e,t,i){var a=i(69868),s=i(71906),o=i(11991);class l extends s.Y{}l=(0,a.__decorate)([(0,o.EM)("ha-chip-set")],l)},53657:function(e,t,i){var a=i(69868),s=i(73142),o=i(65082),l=i(8998),r=i(49377),n=i(68336),c=i(84922),d=i(11991);let h;class u extends s.R{}u.styles=[r.R,n.R,l.R,o.R,(0,c.AH)(h||(h=(e=>e)`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}`))],u=(0,a.__decorate)([(0,d.EM)("ha-input-chip")],u)},83519:function(e,t,i){i.a(e,async function(e,t){try{i(79827),i(35748),i(65315),i(837),i(37089),i(5934),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(18223),i(56660),i(95013);var a=i(69868),s=i(84922),o=i(11991),l=i(65940),r=i(44017),n=i(40804),c=i(15241),d=i(40328),h=i(61627),u=i(64578),p=(i(86160),e([u]));u=(p.then?(await p)():p)[0];let _,b,v,y,m,g=e=>e;const f="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",k="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",M="___ADD_NEW___",$="___NO_LABELS___";class x extends((0,d.E)(s.WF)){async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}hassSubscribe(){return[(0,n.o5)(this.hass.connection,e=>{this._labels=e})]}render(){var e,t;const i=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.label-picker.label"),a=this._computeValueRenderer(this._labels);return(0,s.qy)(_||(_=g` <ha-generic-picker .disabled="${0}" .hass="${0}" .autofocus="${0}" .label="${0}" .notFoundLabel="${0}" .addButtonLabel="${0}" .placeholder="${0}" .value="${0}" .getItems="${0}" .getAdditionalItems="${0}" .valueRenderer="${0}" @value-changed="${0}"> <slot .slot="${0}"></slot> </ha-generic-picker> `),this.disabled,this.hass,this.autofocus,this.label,this.hass.localize("ui.components.label-picker.no_match"),this.hass.localize("ui.components.label-picker.add"),i,this.value,this._getItems,this._getAdditionalItems,a,this._valueChanged,null!==(t=this._slotNodes)&&void 0!==t&&t.length?"field":void 0)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t!==$)if(t){if(t.startsWith(M)){this.hass.loadFragmentTranslation("config");const e=t.substring(M.length);return void(0,h.f)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,n._9)(this.hass,e);this._setValue(t.label_id)}catch(t){(0,c.K$)(this,{title:this.hass.localize("ui.components.label-picker.failed_create_label"),text:t.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._labelMap=(0,l.A)(e=>e?new Map(e.map(e=>[e.label_id,e])):new Map),this._computeValueRenderer=(0,l.A)(e=>t=>{const i=this._labelMap(e).get(t);return i?(0,s.qy)(v||(v=g` ${0} <span slot="headline">${0}</span> `),i.icon?(0,s.qy)(y||(y=g`<ha-icon slot="start" .icon="${0}"></ha-icon>`),i.icon):(0,s.qy)(m||(m=g`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),f),i.name):(0,s.qy)(b||(b=g` <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> <span slot="headline">${0}</span> `),f,t)}),this._getLabelsMemoized=(0,l.A)(n.IV),this._getItems=()=>this._labels&&0!==this._labels.length?this._getLabelsMemoized(this.hass,this._labels,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeLabels):[{id:$,primary:this.hass.localize("ui.components.label-picker.no_labels"),icon_path:f}],this._allLabelNames=(0,l.A)(e=>e?[...new Set(e.map(e=>e.name.toLowerCase()).filter(Boolean))]:[]),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allLabelNames(this._labels);return e&&!t.includes(e.toLowerCase())?[{id:M+e,primary:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:e}),icon_path:k}]:[{id:M,primary:this.hass.localize("ui.components.label-picker.add_new"),icon_path:k}]}}}(0,a.__decorate)([(0,o.MZ)({attribute:!1})],x.prototype,"hass",void 0),(0,a.__decorate)([(0,o.MZ)()],x.prototype,"label",void 0),(0,a.__decorate)([(0,o.MZ)()],x.prototype,"value",void 0),(0,a.__decorate)([(0,o.MZ)()],x.prototype,"helper",void 0),(0,a.__decorate)([(0,o.MZ)()],x.prototype,"placeholder",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],x.prototype,"noAdd",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],x.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],x.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],x.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-label"})],x.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],x.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],x.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],x.prototype,"disabled",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],x.prototype,"required",void 0),(0,a.__decorate)([(0,o.wk)()],x.prototype,"_labels",void 0),(0,a.__decorate)([(0,o.KN)({flatten:!0})],x.prototype,"_slotNodes",void 0),(0,a.__decorate)([(0,o.P)("ha-generic-picker")],x.prototype,"_picker",void 0),x=(0,a.__decorate)([(0,o.EM)("ha-label-picker")],x),t()}catch(_){t(_)}})},57330:function(e,t,i){i.a(e,async function(e,t){try{i(79827),i(35748),i(35058),i(65315),i(837),i(22416),i(37089),i(5934),i(18223),i(95013);var a=i(69868),s=i(84922),o=i(11991),l=i(33055),r=i(65940),n=i(78412),c=i(44017),d=i(24730),h=i(40804),u=i(40328),p=i(61627),_=(i(75831),i(53657),i(83519)),b=e([_]);_=(b.then?(await b)():b)[0];let v,y,m,g,f,k=e=>e;const M="M3 16H10V14H3M18 14V10H16V14H12V16H16V20H18V16H22V14M14 6H3V8H14M14 10H3V12H14V10Z";class $ extends((0,u.E)(s.WF)){async open(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.focus())}hassSubscribe(){return[(0,h.o5)(this.hass.connection,e=>{const t={};e.forEach(e=>{t[e.label_id]=e}),this._labels=t})]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,s.qy)(v||(v=k` ${0} <ha-label-picker .hass="${0}" .helper="${0}" .disabled="${0}" .required="${0}" .placeholder="${0}" .excludeLabels="${0}" @value-changed="${0}"> <ha-chip-set> ${0} <ha-button id="picker" size="small" appearance="filled" @click="${0}" .disabled="${0}"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> ${0} </ha-button> </ha-chip-set> </ha-label-picker> `),this.label?(0,s.qy)(y||(y=k`<label>${0}</label>`),this.label):s.s6,this.hass,this.helper,this.disabled,this.required,this.placeholder,this.value,this._labelChanged,null!=e&&e.length?(0,l.u)(e,e=>null==e?void 0:e.label_id,e=>{const t=null!=e&&e.color?(0,n.M)(e.color):void 0;return(0,s.qy)(m||(m=k` <ha-input-chip .item="${0}" @remove="${0}" @click="${0}" .disabled="${0}" .label="${0}" selected="selected" style="${0}"> ${0} </ha-input-chip> `),e,this._removeItem,this._openDetail,this.disabled,null==e?void 0:e.name,t?`--color: ${t}`:"",null!=e&&e.icon?(0,s.qy)(g||(g=k`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),e.icon):s.s6)}):s.s6,this._openPicker,this.disabled,M,this.hass.localize("ui.components.label-picker.add"))}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter(e=>e!==t.label_id))}_openDetail(e){const t=e.currentTarget.item;(0,p.f)(this,{entry:t,updateEntry:async e=>{await(0,h.Rp)(this.hass,t.label_id,e)}})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout(()=>{(0,c.r)(this,"value-changed",{value:e}),(0,c.r)(this,"change")},0)}_openPicker(e){e.stopPropagation(),this.labelPicker.open()}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.A)((e,t,i)=>null==e?void 0:e.map(e=>null==t?void 0:t[e]).sort((e,t)=>(0,d.xL)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",i)))}}$.styles=(0,s.AH)(f||(f=k`ha-chip-set{margin-bottom:8px;background-color:var(--mdc-text-field-fill-color);border-bottom:1px solid var(--ha-color-border-neutral-normal);border-top-right-radius:var(--ha-border-radius-sm);border-top-left-radius:var(--ha-border-radius-sm);padding:var(--ha-space-3)}.placeholder{color:var(--mdc-text-field-label-ink-color);display:flex;align-items:center;height:var(--ha-space-8)}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}label{display:block;margin:0 0 8px}`)),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],$.prototype,"hass",void 0),(0,a.__decorate)([(0,o.MZ)()],$.prototype,"label",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],$.prototype,"value",void 0),(0,a.__decorate)([(0,o.MZ)()],$.prototype,"helper",void 0),(0,a.__decorate)([(0,o.MZ)()],$.prototype,"placeholder",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],$.prototype,"noAdd",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"include-domains"})],$.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],$.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],$.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,o.MZ)({type:Array,attribute:"exclude-label"})],$.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],$.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],$.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],$.prototype,"disabled",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],$.prototype,"required",void 0),(0,a.__decorate)([(0,o.wk)()],$.prototype,"_labels",void 0),(0,a.__decorate)([(0,o.P)("ha-label-picker",!0)],$.prototype,"labelPicker",void 0),$=(0,a.__decorate)([(0,o.EM)("ha-labels-picker")],$),t()}catch(v){t(v)}})},40804:function(e,t,i){i.d(t,{IV:function(){return p},Rp:function(){return u},_9:function(){return h},o5:function(){return d}});i(32203),i(79827),i(35748),i(35058),i(65315),i(12840),i(837),i(22416),i(37089),i(59023),i(12977),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(18223),i(95013);var a=i(47308),s=i(88341),o=i(24730),l=i(51849),r=i(95968);const n=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then(e=>e.sort((e,t)=>(0,o.xL)(e.name,t.name))),c=(e,t)=>e.subscribeEvents((0,l.s)(()=>n(e).then(e=>t.setState(e,!0)),500,!0),"label_registry_updated"),d=(e,t)=>(0,a.N)("_labelRegistry",n,c,e,t),h=(e,t)=>e.callWS(Object.assign({type:"config/label_registry/create"},t)),u=(e,t,i)=>e.callWS(Object.assign({type:"config/label_registry/update",label_id:t},i)),p=(e,t,i,a,o,l,n,c)=>{if(!t||0===t.length)return[];const d=Object.values(e.devices),h=Object.values(e.entities);let u,p,_={};(i||a||o||l||n)&&(_=(0,r.g2)(h),u=d,p=h.filter(e=>e.labels.length>0),i&&(u=u.filter(e=>{const t=_[e.id];return!(!t||!t.length)&&_[e.id].some(e=>i.includes((0,s.m)(e.entity_id)))}),p=p.filter(e=>i.includes((0,s.m)(e.entity_id)))),a&&(u=u.filter(e=>{const t=_[e.id];return!t||!t.length||h.every(e=>!a.includes((0,s.m)(e.entity_id)))}),p=p.filter(e=>!a.includes((0,s.m)(e.entity_id)))),o&&(u=u.filter(t=>{const i=_[t.id];return!(!i||!i.length)&&_[t.id].some(t=>{const i=e.states[t.entity_id];return!!i&&(i.attributes.device_class&&o.includes(i.attributes.device_class))})}),p=p.filter(t=>{const i=e.states[t.entity_id];return i.attributes.device_class&&o.includes(i.attributes.device_class)})),l&&(u=u.filter(e=>l(e))),n&&(u=u.filter(t=>{const i=_[t.id];return!(!i||!i.length)&&_[t.id].some(t=>{const i=e.states[t.entity_id];return!!i&&n(i)})}),p=p.filter(t=>{const i=e.states[t.entity_id];return!!i&&n(i)})));let b=t;const v=new Set;let y;u&&(y=u.filter(e=>e.area_id).map(e=>e.area_id),u.forEach(e=>{e.labels.forEach(e=>v.add(e))})),p&&(y=(null!=y?y:[]).concat(p.filter(e=>e.area_id).map(e=>e.area_id)),p.forEach(e=>{e.labels.forEach(e=>v.add(e))})),y&&y.forEach(t=>{e.areas[t].labels.forEach(e=>v.add(e))}),c&&(b=b.filter(e=>!c.includes(e.label_id))),(u||p)&&(b=b.filter(e=>v.has(e.label_id)));return b.map(e=>{var t;return{id:e.label_id,primary:e.name,secondary:null!==(t=e.description)&&void 0!==t?t:"",icon:e.icon||void 0,icon_path:e.icon?void 0:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",sorting_label:e.name,search_labels:[e.name,e.label_id,e.description].filter(e=>Boolean(e))}})}},40328:function(e,t,i){i.d(t,{E:function(){return o}});i(79827),i(35748),i(65315),i(59023),i(5934),i(18223),i(95013);var a=i(69868),s=i(11991);const o=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then(e=>e()):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(e=>void 0===this[e])||(this.__unsubs=this.hassSubscribe())}}return(0,a.__decorate)([(0,s.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},61627:function(e,t,i){i.d(t,{f:function(){return o}});i(35748),i(5934),i(95013);var a=i(44017);const s=()=>Promise.all([i.e("7598"),i.e("3245"),i.e("2853"),i.e("9526")]).then(i.bind(i,55333)),o=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:s,dialogParams:t})}}}]);
//# sourceMappingURL=447.f5729a2dfd07364d.js.map